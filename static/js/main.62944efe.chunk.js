(this.webpackJsonptenacity=this.webpackJsonptenacity||[]).push([[0],{16:function(t,e,n){},23:function(t,e,n){},24:function(t,e,n){"use strict";n.r(e);var o,r=n(1),i=n.n(r),c=n(11),a=n.n(c),s=(n(16),n(4)),u=n(3),l=n(9),b=n.n(l),j=n(5),d=n(6),O=n(2),m="FORWARD",f=Object(j.a)({},m,{name:"Move Forward"}),x=function(t,e){for(var n={},o=0;o<e.length;o++){var r=e[o];void 0===n[r]?n[r]=1:n[r]++}return t.reduce((function(t,e){var o=Object(s.a)(e,2),r=o[0],i=o[1];return[].concat(Object(d.a)(t),[[r,i-(n[r]||0)]])}),[])},p=n(0),g=function(t){var e=t.addToProgram,n=t.blocks,o=t.onResetProgram,r=t.onSubmitProgram,i=t.program,c=t.programSubmitted;return Object(p.jsx)("div",{id:"control-panel",children:Object(p.jsxs)("div",{id:"control-panel-container",children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{id:"program",children:i.map((function(t,e){return Object(p.jsx)("div",{children:f[t].name},e)}))}),!c&&Object(p.jsxs)("div",{children:[Object(p.jsx)("button",{onClick:o,children:"Reset"}),Object(p.jsx)("button",{onClick:function(){window.scrollTo({top:0,behavior:"smooth"}),setTimeout(r,1e3)},children:"Submit Instructions"})]})]}),Object(p.jsx)("div",{id:"blocks",children:n.map((function(t,n){var o=Object(s.a)(t,2),r=o[0],i=o[1];if(0!=i)return Object(p.jsxs)("button",{className:"block",onClick:function(){return function(t){c||e(t)}(r)},children:[f[r].name," (x",i,")"]},n)}))})]})})},h=800,y=600,v=100,S=(n(23),function(t){var e=t.onCompleteIntro,n=t.onStartPlaying,o=Object(r.useState)(!1),i=Object(s.a)(o,2),c=i[0],a=i[1],l=Object(u.b)({to:{opacity:c?0:1},from:{opacity:0},config:{duration:1500},onRest:function(){c&&e()}}),b=function(){n(),a(!0)};return Object(p.jsxs)(u.a.g,{opacity:l.opacity,children:[Object(p.jsx)("text",{x:"50%",y:"30%",dominantBaseline:"middle",textAnchor:"middle",className:"titleText",opacity:l.opacity,children:"Tenacity"}),Object(p.jsx)("text",{x:"50%",y:"45%",dominantBaseline:"middle",textAnchor:"middle",className:"subheadText",opacity:l.opacity,children:"A game by Brian Yu"}),Object(p.jsx)("rect",{x:300,y:"360",height:80,width:200,rx:20,fill:"white",className:"hoverable",onClick:b}),Object(p.jsx)("text",{x:400,y:"400",dominantBaseline:"middle",textAnchor:"middle",style:{fontSize:"48px",fill:"black"},className:"hoverable",onClick:b,children:"Play"})]})}),I=function(t){var e=t.planet;return Object(p.jsxs)("g",{children:[Object(p.jsx)("rect",{x:0,y:500,width:h,height:v,fill:e.colors.main}),Object(d.a)(Array(8).keys()).map((function(t){return Object(p.jsx)("rect",{x:100*t-.5,y:500,width:1,height:10},t)}))]})},T=n.p+"static/media/rocket.0dec99f9.svg",k={ROVER:{image:n.p+"static/media/rover.b107911f.svg",height:80,width:80},ROCKET:{image:T,height:100,width:57}},C=[{name:"Mercury",introConfig:{size:15,scale:2,orbitDuration:1e4,textColor:"black"},colors:{main:"#ae7c43",sky:"#dbb78f",text:"black"},briefing:"The Tenacity rover has arrived on Mercury. Use the control panel to help Tenacity complete its missions.",missions:[{objective:"Navigate Tenacity back to the spacecraft for refueling.",blocks:[[m,2]],items:{rocket:{object:k.ROCKET,x:500},rover:{object:k.ROVER,x:300}},criteria:[{category:"rover_x",value:500}]},{objective:"This Mission has yet to be created. Check back soon!",blocks:[],items:{},criteria:[]}]},{name:"Venus"}],R=function(t){var e=t.onCompleteIntro,n=t.onZoomIntro,o=t.planetIndex,i=C[o],c=i.introConfig.scale,a=Object(r.useState)(!1),l=Object(s.a)(a,2),b=l[0],j=l[1],d=Object(r.useState)(!1),O=Object(s.a)(d,2),m=O[0],f=O[1],x=Object(r.useState)(!1),g=Object(s.a)(x,2),h=g[0],y=g[1],v=Object(r.useState)(!1),S=Object(s.a)(v,2),I=S[0],T=S[1],k=Object(u.b)({to:{opacity:1},from:{opacity:0},config:{duration:1500},delay:1500}),R=Object(u.b)({to:{opacity:1},from:{opacity:0},config:{duration:1500},delay:3e3}),E=Object(u.b)({to:{angle:2*Math.PI},from:{angle:0},config:{duration:1e4},reset:b,onRest:function(){return j((function(t){return!t}))}}),N=Object(u.b)({to:{opacity:m?0:1},from:{opacity:1},config:{duration:2e3},onRest:function(){m&&e()}}),P=Object(u.b)({to:{opacity:I?1:0},from:{opacity:0},config:{duration:1e3},onRest:function(){I&&setTimeout((function(){f(!0)}),2e3)}}),M=C.slice(0,1+o).map((function(t,e){var r=e==o,i=void 0;r&&(i=Object(u.b)({to:{r:h?1600:t.introConfig.size*c},from:{r:t.introConfig.size*c},config:{duration:1e3},onRest:function(){h&&(n(),T(!0))}}));var a=100+20*e;return Object(p.jsxs)(u.a.g,{opacity:R.opacity,children:[Object(p.jsx)(u.a.circle,{cx:400,cy:300,r:a*c,fillOpacity:0,stroke:"white",strokeWidth:2}),Object(p.jsx)(u.a.circle,{cx:E.angle.interpolate((function(t){return 400+c*(a*Math.cos(t))})),cy:E.angle.interpolate((function(t){return 300-c*(a*Math.sin(t))})),r:r?i.r:t.introConfig.size*c,style:{fill:t.colors.main}})]},e)}));return Object(r.useEffect)((function(){var t=setTimeout((function(){y(!0)}),1e4);return function(){return clearTimeout(t)}}),[]),Object(p.jsxs)(u.a.g,{opacity:N.opacity,children:[Object(p.jsx)(u.a.circle,{cx:400,cy:300,r:50*c,style:{fill:"#f0f067"},opacity:k.opacity}),M,Object(p.jsx)(u.a.text,{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",style:{fontSize:"80px",fill:i.introConfig.textColor},opacity:P.opacity,children:i.name})]})},E=function(t){var e=t.planet,n=t.completedMissions;return Object(p.jsxs)("g",{children:[Object(p.jsx)("text",{textAnchor:"end",dominantBaseline:"hanging",x:785,y:15,style:{fill:e.colors.text,fontSize:"24px"},children:e.name}),e.missions.map((function(t,o){return Object(p.jsx)("circle",{cx:35+55*o,cy:35,r:20,style:{fill:n>o?e.colors.main:"rgba(0, 0, 0, 0)",stroke:e.colors.main,strokeWidth:n>o?0:1}},o)}))]})},N=Object(u.a)((function(t){var e=t.object,n=t.x,o=t.y,r=t.center;return Object(p.jsx)("image",{href:e.image,height:e.height,x:!1===r?n:n-e.width/2,y:o})})),P=function(t){var e=t.currentInstruction,n=t.planetIndex,o=t.missionIndex,i=t.onSuccess,c=t.onFailure,a=t.setCurrentInstruction,l=t.program,b=t.programSubmitted,j=C[n],d=j.missions[o],f=Object(r.useState)(0),x=Object(s.a)(f,2),g=x[0],h=x[1],y=Object(r.useState)(d.items),v=Object(s.a)(y,2),S=v[0],I=v[1],T=Object(r.useState)(!1),k=Object(s.a)(T,2),R=k[0],E=k[1],P=Object(r.useState)(!1),M=Object(s.a)(P,2),w=M[0],A=M[1];function _(t){switch(t.category){case"rover_x":return t.value===S.rover.x;default:return console.log("Error: Unknown criterion."),!1}}if(b&&e<l.length&&g==e)switch(l[e]){case m:h((function(t){return t+1})),I((function(t){var e=t.rover;return Object(O.a)(Object(O.a)({},t),{},{rover:Object(O.a)(Object(O.a)({},e),{},{x:e.x+100,prev:{x:e.x+100}})})}));break;default:console.log("ERROR: Unknown block.")}var B=Object(u.b)({to:{opacity:R?1:0},from:{opacity:0},config:{duration:1e3},delay:500,onRest:function(){R&&setTimeout((function(){i()}),2500)}}),L=Object(u.b)({to:{opacity:w?1:0},from:{opacity:0},config:{duration:1e3},delay:500,onRest:function(){w&&setTimeout((function(){c()}),2500)}});return Object(p.jsxs)("g",{children:[Object.keys(S).map((function(t,n){var o=S[t],r=Object(u.b)({to:{x:o.x,elevation:o.elevation||0},from:{x:o.prev&&o.prev.x?o.prev.x:o.x,elevation:o.prev&&o.prev.elevation?o.prev.elevation:o.elevation||0},config:{duration:1e3},onRest:function(){"rover"===t&&b&&g===l.length&&(!function(){for(var t=0;t<d.criteria.length;t++)if(!_(d.criteria[t]))return!1;return!0}()?A(!0):E(!0)),"rover"===t&&b&&g>e&&g!=l.length&&setTimeout((function(){a(e+1)}),250)}});return Object(p.jsx)(N,{object:o.object,x:r.x,y:r.elevation.interpolate((function(t){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 500-t.height-e}(o.object,t)}))},n)})),Object(p.jsx)(u.a.text,{x:"50%",y:"20%",dominantBaseline:"middle",textAnchor:"middle",opacity:B.opacity,style:{fontSize:"80px",fill:j.colors.text},children:"Mission Success"}),Object(p.jsx)(u.a.text,{x:"50%",y:"20%",dominantBaseline:"middle",textAnchor:"middle",opacity:L.opacity,style:{fontSize:"80px",fill:j.colors.text},children:"Try Again"})]})},M=function(t){var e=t.missionNumber,n=t.objective;return Object(p.jsxs)("div",{style:{fontSize:"24px",textAlign:"center"},children:[Object(p.jsxs)("strong",{children:["Mission ",e," Objective"]}),Object(p.jsx)("br",{}),n]})},w=function(t){var e=t.briefing,n=t.onCompleteBriefing;return Object(p.jsxs)("div",{style:{fontSize:"24px",textAlign:"center"},children:[e,Object(p.jsx)("br",{}),Object(p.jsx)("button",{onClick:n,children:"Continue"})]})},A="COMPLETE_INTRO",_="COMPLETE_PLANET_INTRO",B="ZOOM_PLANET_INTRO",L="COMPLETE_BRIEFING",z="ADD_TO_PROGRAM",F="RESET_PROGRAM",G="SUBMIT_PROGRAM",W="SET_INST_PTR",Z="NEXT_MISSION",D="REPEAT_MISSION",U=(o={},Object(j.a)(o,A,(function(t){return Object(O.a)(Object(O.a)({},t),{},{introShown:!0})})),Object(j.a)(o,B,(function(t){return t.planetIntroStatus===H.NOT_SHOWN?Object(O.a)(Object(O.a)({},t),{},{planetIntroStatus:H.ZOOMING}):t})),Object(j.a)(o,_,(function(t){return Object(O.a)(Object(O.a)({},t),{},{planetIntroStatus:H.COMPLETE})})),Object(j.a)(o,L,(function(t){return Object(O.a)(Object(O.a)({},t),{},{briefingShown:!0})})),Object(j.a)(o,z,(function(t,e){return Object(O.a)(Object(O.a)({},t),{},{program:[].concat(Object(d.a)(t.program),[e])})})),Object(j.a)(o,F,(function(t){return Object(O.a)(Object(O.a)({},t),{},{program:[]})})),Object(j.a)(o,G,(function(t){return Object(O.a)(Object(O.a)({},t),{},{programSubmitted:!0})})),Object(j.a)(o,W,(function(t,e){return Object(O.a)(Object(O.a)({},t),{},{currentInstruction:e})})),Object(j.a)(o,Z,(function(t){var e=C[t.planetIndex];return t.missionIndex+1<e.missions.length?Object(O.a)(Object(O.a)({},t),{},{missionIndex:t.missionIndex+1,round:t.round+1,program:[],programSubmitted:!1,currentInstruction:0}):t.planetIndex+1<C.length?Object(O.a)(Object(O.a)({},t),{},{planetIndex:t.planetIndex+1,missionIndex:0,round:t.round+1,planetIntroShown:!1,briefingShown:!1,program:[],programSubmitted:!1,currentInstruction:0}):Object(O.a)(Object(O.a)({},t),{},{done:!0})})),Object(j.a)(o,D,(function(t){return Object(O.a)(Object(O.a)({},t),{},{round:t.round+1,program:[],programSubmitted:!1,currentInstruction:0})})),o),H={NOT_SHOWN:0,ZOOMING:1,COMPLETE:2},V=function(t,e){var n=e.type,o=e.payload,r=U[n];return r?r(t,o):t},J=function(t){var e,n=t.onStartPlaying,o=Object(r.useReducer)(V,{planetIndex:0,missionIndex:0,done:!1,round:0,introShown:!!(e=!1),planetIntroStatus:e?H.COMPLETE:H.NOT_SHOWN,briefingShown:!!e,program:[],programSubmitted:!1,currentInstruction:0}),i=Object(s.a)(o,2),c=i[0],a=i[1],l=function(t,e){return a({type:t,payload:e})},b=c.planetIndex,j=c.missionIndex,d=c.introShown,O=c.planetIntroStatus,m=c.briefingShown,f=c.program,v=c.programSubmitted,T=c.round,k=c.currentInstruction,N=c.done,U=C[b],J=U.missions[j];function K(){l(A)}function Y(){l(B)}function X(){l(_)}function q(){l(L)}function Q(t){l(W,t)}var $=Object(u.b)({to:{color:d?O>=H.ZOOMING?U.colors.sky:"black":"rgba(0, 0, 0, 0)"},from:{color:"rgba(0, 0, 0, 0)"},config:{duration:1500}}),tt=O==H.COMPLETE,et=tt&&m;return N?Object(p.jsx)("div",{children:"game over"}):Object(p.jsxs)("div",{style:{maxWidth:h},children:[Object(p.jsxs)(u.a.svg,{width:h,height:y,className:"scene",style:{backgroundColor:$.color},children:[O>=H.ZOOMING&&Object(p.jsx)(I,{planet:U}),tt&&Object(p.jsx)(E,{planet:U,completedMissions:j}),d?tt?Object(p.jsx)(P,{currentInstruction:k,planetIndex:b,missionIndex:j,onFailure:function(){return l(D)},onSuccess:function(){return l(Z)},setCurrentInstruction:Q,program:f,programSubmitted:v},T):Object(p.jsx)(R,{planetIndex:b,onZoomIntro:Y,onCompleteIntro:X}):Object(p.jsx)(S,{onStartPlaying:n,onCompleteIntro:K})]}),tt&&(m?Object(p.jsx)(M,{missionNumber:j+1,objective:J.objective}):Object(p.jsx)(w,{briefing:U.briefing,onCompleteBriefing:q})),et&&Object(p.jsx)(g,{addToProgram:function(t){l(z,t)},blocks:x(J.blocks,f),onResetProgram:function(){return l(F)},onSubmitProgram:function(){return l(G)},program:f,programSubmitted:v})]})},K=n.p+"static/media/amerika.421d9361.mp3",Y=Object(u.a)(b.a),X=function(){var t=Object(r.useState)(!1),e=Object(s.a)(t,2),n=e[0],o=e[1],i=Object(u.b)({to:{volume:n?100:0},from:{volume:0},config:{duration:8e3}});return Object(p.jsxs)("div",{className:"page",children:[Object(p.jsx)("div",{className:"scene-container",children:Object(p.jsx)(J,{onStartPlaying:function(){return o(!0)}})}),Object(p.jsx)(Y,{url:K,playStatus:n?b.a.status.PLAYING:b.a.status.STOPPED,autoLoad:!0,loop:!0,volume:i.volume})]})},q=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,25)).then((function(e){var n=e.getCLS,o=e.getFID,r=e.getFCP,i=e.getLCP,c=e.getTTFB;n(t),o(t),r(t),i(t),c(t)}))};a.a.render(Object(p.jsx)(i.a.StrictMode,{children:Object(p.jsx)(X,{})}),document.getElementById("root")),q()}},[[24,1,2]]]);
//# sourceMappingURL=main.62944efe.chunk.js.map