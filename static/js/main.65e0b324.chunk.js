(this.webpackJsonptenacity=this.webpackJsonptenacity||[]).push([[0],{19:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var o,c=n(2),i=n.n(c),r=n(14),a=n.n(r),s=(n(19),n(5)),u=n(3),l=n(11),b=n.n(l),j=n(4),d=n(6),O=n(0),m="ROCKET_LAUNCH",f={FORWARD:"FORWARD",TURN:"TURN",PICK_UP:"PICK_UP"},p=(o={},Object(j.a)(o,f.FORWARD,{name:"Move Forward"}),Object(j.a)(o,f.TURN,{name:"Turn Around"}),Object(j.a)(o,f.PICK_UP,{name:"Pick Up Object"}),Object(j.a)(o,f.LAUNCH_ROCKET,{name:"Launch Rocket"}),o),x=function(e,t){for(var n={},o=0;o<t.length;o++){var c=t[o];void 0===n[c]?n[c]=1:n[c]++}return e.reduce((function(e,t){var o=Object(s.a)(t,2),c=o[0],i=o[1];return[].concat(Object(d.a)(e),[[c,i-(n[c]||0)]])}),[])},h=n(1),g=function(e){var t=e.addToProgram,n=e.blocks,o=e.onResetProgram,c=e.onSubmitProgram,i=e.program,r=e.programSubmitted;return Object(h.jsx)("div",{id:"control-panel",children:Object(h.jsxs)("div",{id:"control-panel-container",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{id:"program",children:i.map((function(e,t){return Object(h.jsx)("div",{children:p[e].name},t)}))}),!r&&Object(h.jsxs)("div",{children:[Object(h.jsx)("button",{onClick:o,children:"Reset"}),Object(h.jsx)("button",{onClick:function(){window.scrollTo({top:0,behavior:"smooth"}),setTimeout(c,1e3)},children:"Submit Instructions"})]})]}),Object(h.jsx)("div",{id:"blocks",children:n.map((function(e,n){var o=Object(s.a)(e,2),c=o[0],i=o[1];if(0!=i)return Object(h.jsxs)("button",{className:"block",onClick:function(){return function(e){r||t(e)}(c)},children:[p[c].name," (x",i,")"]},n)}))})]})})},v=n(12),y=n.p+"static/media/rocket.0dec99f9.svg",R=n.p+"static/media/rover.b107911f.svg",C=n.p+"static/media/rover_flipped.1ce4141d.svg",I=n.p+"static/media/mercury_crater.af0b0b06.svg",k=n.p+"static/media/rock_red.31b2b06f.svg",S=800,T=600,w=100,E={ROVER:{images:[R,C],height:80,width:80},ROCKET:{images:[y],height:100,width:57},MERCURY_CRATER:{images:[I],height:30,width:90},ROCK_RED:{images:[k],height:30,width:40}},P={elevation:0,opacity:1,costumeNumber:0},_=[{name:"Mercury",introConfig:{size:15,scale:2,orbitDuration:1e4,textColor:"black"},colors:{main:"#bfbaac",sky:"#7d705b",text:"black"},briefing:"The Tenacity rover has arrived on Mercury. Use the control panel to help Tenacity complete its missions.",missions:[{objective:"Navigate Tenacity back to the spacecraft for refueling.",blocks:[[f.FORWARD,2]],items:[Object(O.a)(Object(O.a)({},P),{},{id:"rocket",object:E.ROCKET,x:500}),Object(O.a)(Object(O.a)({},P),{},{id:"rover",object:E.ROVER,x:300})],criteria:[{category:"rover_x",value:500}]},{objective:"Get close to the crater to explore it. But be careful not to fall in!",hint:"You do not always need to use every block available to you.",blocks:[[f.FORWARD,5]],items:[Object(O.a)(Object(O.a)({},P),{},{id:"rocket",object:E.ROCKET,x:100}),Object(O.a)(Object(O.a)({},P),{},{id:"crater",object:E.MERCURY_CRATER,x:500,elevation:-30,allowFall:!0}),Object(O.a)(Object(O.a)({},P),{},{id:"rover",object:E.ROVER,x:100})],criteria:[{category:"rover_x",value:400}]},{objective:"Return the rock sample back to the rocket.",blocks:[[f.FORWARD,5],[f.PICK_UP,1],[f.TURN,1]],items:[Object(O.a)(Object(O.a)({},P),{},{id:"rocket",object:E.ROCKET,x:100}),Object(O.a)(Object(O.a)({},P),{},{id:"crater",object:E.MERCURY_CRATER,x:500,elevation:-30,allowFall:!0}),Object(O.a)(Object(O.a)({},P),{},{id:"rock",object:E.ROCK_RED,x:400,elevation:-30}),Object(O.a)(Object(O.a)({},P),{},{id:"rover",object:E.ROVER,x:400})],criteria:[{category:"rover_x",value:100},{category:"rover_carry",value:"rock"}]},{objective:"We're done here on Mercury! Launch the rocket to head to the next planet.",blocks:[[f.LAUNCH_ROCKET,1]],items:[Object(O.a)(Object(O.a)({},P),{},{id:"rocket",object:E.ROCKET,x:400}),Object(O.a)(Object(O.a)({},P),{},{id:"rover",object:E.ROVER,x:400})],criteria:[{category:"event",value:m}]}]},{name:"Venus",introConfig:{size:20,scale:1.7,orbitDuration:28900,textColor:"black"},colors:{main:"#ae7c43",sky:"#dbb78f",text:"black"},briefing:"Welcome to Venus!",missions:[{objective:"This mission has not yet been created. Check back soon!",blocks:[],items:[Object(O.a)(Object(O.a)({},P),{},{id:"rocket",object:E.ROCKET,x:500}),Object(O.a)(Object(O.a)({},P),{},{id:"rover",object:E.ROVER,x:300})],criteria:[{category:"rover_x",value:0}]}]}];v.a.initialize("UA-123778931-5");var A,N=function(e,t){return"".concat(_[e].name,", Mission ").concat(t+1)},M=function(e){v.a.event(e)},U=(n(25),function(e){var t=e.onCompleteIntro,n=e.onStartPlaying,o=Object(c.useState)(!1),i=Object(s.a)(o,2),r=i[0],a=i[1],l=Object(u.b)({to:{opacity:r?0:1},from:{opacity:0},config:{duration:1500},onRest:function(){r&&t()}}),b=function(){M({category:"Game",action:"Play Game"}),n(),a(!0)};return Object(h.jsxs)(u.a.g,{opacity:l.opacity,children:[Object(h.jsx)("text",{x:"50%",y:"30%",dominantBaseline:"middle",textAnchor:"middle",className:"titleText",opacity:l.opacity,children:"Tenacity"}),Object(h.jsx)("text",{x:"50%",y:"45%",dominantBaseline:"middle",textAnchor:"middle",className:"subheadText",opacity:l.opacity,children:"A game by Brian Yu"}),Object(h.jsx)("rect",{x:300,y:"360",height:80,width:200,rx:20,fill:"white",className:"hoverable",onClick:b}),Object(h.jsx)("text",{x:400,y:"400",dominantBaseline:"middle",textAnchor:"middle",style:{fontSize:"48px",fill:"black"},className:"hoverable",onClick:b,children:"Play"})]})}),L=function(){return Object(h.jsxs)("div",{style:{maxWidth:"500px"},children:[Object(h.jsx)("div",{children:"Tenacity is a work in progress, and you've reached the end of what's been developed so far! Check back soon for more missions."}),Object(h.jsx)("br",{}),Object(h.jsxs)("div",{children:["Tenacity is developed by Brian Yu at Harvard Graduate School of Education. While the game is in development, I would love to hear thoughts, feedback, and recommendations: you can reach me at ",Object(h.jsx)("a",{style:{color:"white"},href:"mailto:brian@brianyu.me",children:"brian@brianyu.me"}),"."]})]})},D=function(e){var t=e.planet;return Object(h.jsxs)("g",{children:[Object(h.jsx)("rect",{x:0,y:500,width:S,height:w,fill:t.colors.main}),Object(d.a)(Array(8).keys()).map((function(e){return Object(h.jsx)("rect",{x:100*e-.5,y:500,width:1,height:10},e)}))]})},F=function(e){var t=e.onCompleteIntro,n=e.onZoomIntro,o=e.planetIndex,i=_[o],r=i.introConfig.scale,a=Object(c.useState)(!1),l=Object(s.a)(a,2),b=l[0],j=l[1],d=Object(c.useState)(!1),O=Object(s.a)(d,2),m=O[0],f=O[1],p=Object(c.useState)(!1),x=Object(s.a)(p,2),g=x[0],v=x[1],y=Object(c.useState)(!1),R=Object(s.a)(y,2),C=R[0],I=R[1],k=Object(u.b)({to:{opacity:1},from:{opacity:0},config:{duration:1500},delay:1500}),S=Object(u.b)({to:{opacity:1},from:{opacity:0},config:{duration:1500},delay:3e3}),T=Object(u.b)({to:{angle:4*Math.PI},from:{angle:0},config:{duration:2e4},reset:b,onRest:function(){return j((function(e){return!e}))}}),w=Object(u.b)({to:{zoom:g?1:0},from:{zoom:0},config:{duration:1e3},onRest:function(){g&&(n(),I(!0))}}),E=Object(u.b)({to:{opacity:m?0:1},from:{opacity:1},config:{duration:2e3},onRest:function(){m&&t()}}),P=Object(u.b)({to:{opacity:C?1:0},from:{opacity:0},config:{duration:1e3},onRest:function(){C&&setTimeout((function(){f(!0)}),2e3)}}),A=_.slice(0,1+o).map((function(e,t){var n=t==o,c=100+50*t;return Object(h.jsxs)(u.a.g,{opacity:S.opacity,children:[Object(h.jsx)(u.a.circle,{cx:400,cy:300,r:c*r,fillOpacity:0,stroke:"white",strokeWidth:2}),Object(h.jsx)(u.a.circle,{cx:T.angle.interpolate((function(t){return 400+r*(c*Math.cos(t*(1e4/e.introConfig.orbitDuration)))})),cy:T.angle.interpolate((function(t){return 300-r*(c*Math.sin(t*(1e4/e.introConfig.orbitDuration)))})),r:n?w.zoom.interpolate((function(t){return e.introConfig.size*r+t*(1600-e.introConfig.size*r)})):e.introConfig.size*r,style:{fill:e.colors.main}})]},t)}));return Object(c.useEffect)((function(){var e=setTimeout((function(){v(!0)}),1e4);return function(){return clearTimeout(e)}}),[]),Object(h.jsxs)(u.a.g,{opacity:E.opacity,children:[Object(h.jsx)(u.a.circle,{cx:400,cy:300,r:50*r,style:{fill:"#f0f067"},opacity:k.opacity}),A,Object(h.jsx)(u.a.text,{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",style:{fontSize:"80px",fill:i.introConfig.textColor},opacity:P.opacity,children:i.name})]})},K=function(e){var t=e.planet,n=e.completedMissions;return Object(h.jsxs)("g",{children:[Object(h.jsx)("text",{textAnchor:"end",dominantBaseline:"hanging",x:785,y:15,style:{fill:t.colors.text,fontSize:"24px"},children:t.name}),t.missions.map((function(e,o){return Object(h.jsx)("circle",{cx:35+55*o,cy:35,r:20,style:{fill:n>o?t.colors.main:"rgba(0, 0, 0, 0)",stroke:t.colors.main,strokeWidth:n>o?0:1}},o)}))]})},z=n(8),B=Object(u.a)((function(e){var t=e.object,n=e.x,o=e.y,c=e.center,i=e.costumeIndex,r=e.opacity;return void 0===i&&(i=0),Object(h.jsx)("image",{href:t.images[i],height:t.height,x:!1===c?n:n-t.width/2,y:o,opacity:r})})),W=function(e){var t=e.currentInstruction,n=e.planetIndex,o=e.missionIndex,i=e.onSuccess,r=e.onFailure,a=e.setCurrentInstruction,l=e.program,b=e.programSubmitted,j=_[n],p=j.missions[o];Object(c.useEffect)((function(){M({category:"Level",action:"Start Level",label:N(n,o)})}),[]);var x=Object(c.useState)({startTime:new Date,instructionsCompleted:0,items:p.items,winMessage:!1,loseMessage:!1,events:[]}),g=Object(s.a)(x,2),v=g[0],y=g[1],R=v.startTime,C=v.instructionsCompleted,I=v.items,k=v.winMessage,S=v.loseMessage,T=I.findIndex((function(e){return"rover"===e.id})),w=-1!==T?I[T]:null,E=I.findIndex((function(e){return"rocket"===e.id})),P=-1!==E?I[E]:null;function A(e){switch(e.category){case"rover_x":return e.value===w.x;case"rover_carry":var t,n=Object(z.a)(I);try{for(n.s();!(t=n.n()).done;){var o=t.value;if(o.id===e.value&&!0===o.carried)return!0}}catch(a){n.e(a)}finally{n.f()}return!1;case"event":var c,i=Object(z.a)(v.events);try{for(i.s();!(c=i.n()).done;){var r=c.value;if(e.value===r)return!0}}catch(a){i.e(a)}finally{i.f()}return!1;default:return console.log("Error: Unknown criterion."),!1}}if(b&&t<l.length&&C==t&&!k&&!S)switch(l[t]){case f.FORWARD:y((function(e){return Object(O.a)(Object(O.a)({},e),{},{instructionsCompleted:e.instructionsCompleted+1,items:e.items.map((function(e,t){return t===T||!0===e.carried?Object(O.a)(Object(O.a)({},e),{},{x:0===w.costumeNumber?e.x+100:e.x-100}):e}))})}));break;case f.TURN:y((function(e){return Object(O.a)(Object(O.a)({},e),{},{instructionsCompleted:e.instructionsCompleted+1,items:e.items.map((function(e,t){return t===T?Object(O.a)(Object(O.a)({},w),{},{costumeNumber:0===w.costumeNumber?1:0}):e}))})}));break;case f.PICK_UP:var U=function(){var e,t=null,n=Object(z.a)(I);try{for(n.s();!(e=n.n()).done;){var o=e.value;o!==w&&o.x===w.x&&(null===t||o.elevation>t.elevation)&&(t=o)}}catch(c){n.e(c)}finally{n.f()}return t}();y(null!=U?function(e){return Object(O.a)(Object(O.a)({},e),{},{instructionsCompleted:e.instructionsCompleted+1,items:e.items.map((function(e,t){return e===U?Object(O.a)(Object(O.a)({},U),{},{elevation:30,carried:!0}):t===T?Object(O.a)(Object(O.a)({},w),{},{util:(w.util||0)+1}):e}))})}:function(e){return Object(O.a)(Object(O.a)({},e),{},{instructionsCompleted:e.instructionsCompleted+1,items:e.items.map((function(e,t){return t===T?Object(O.a)(Object(O.a)({},w),{},{util:(w.util||0)+1}):e}))})});break;case f.LAUNCH_ROCKET:var L=P&&w&&P.x===w.x;y((function(e){return Object(O.a)(Object(O.a)({},e),{},{instructionsCompleted:e.instructionsCompleted+1,items:L?e.items.map((function(e,t){return t===T?Object(O.a)(Object(O.a)({},w),{},{opacity:-10}):t===E?Object(O.a)(Object(O.a)({},P),{},{elevation:600}):e})):e.items,events:[].concat(Object(d.a)(e.events),[m])})}));default:console.log("ERROR: Unknown block.")}var D=Object(u.b)({to:{opacity:k?1:0},from:{opacity:0},config:{duration:1e3},delay:500,onRest:function(){k&&(M({category:"Level",action:"Win Level",label:N(n,o),value:Math.round((new Date-R)/1e3)}),setTimeout((function(){i()}),2500))}}),F=Object(u.b)({to:{opacity:S?1:0},from:{opacity:0},config:{duration:1e3},delay:500,onRest:function(){S&&(M({category:"Level",action:"Lose Level",label:N(n,o),value:Math.round((new Date-R)/1e3)}),setTimeout((function(){r()}),2500))}}),K=Object(u.c)(I.length,I.map((function(e,n){return{to:{x:e.x,elevation:e.elevation,opacity:e.opacity,util:e.util||0},config:{duration:1e3},onRest:function(){k||S||(n===T&&b&&function(e){var t,n=Object(z.a)(I);try{for(n.s();!(t=n.n()).done;){var o=t.value;if(o.allowFall&&o.x==e.x&&0===e.elevation)return!0}}catch(c){n.e(c)}finally{n.f()}return!1}(e)?y((function(e){return Object(O.a)(Object(O.a)({},e),{},{items:e.items.map((function(e,t){return t===T||!0===e.carried?Object(O.a)(Object(O.a)({},e),{},{elevation:e.elevation-20}):e})),loseMessage:!0})})):(n===T&&b&&v.instructionsCompleted===l.length&&(!function(){for(var e=0;e<p.criteria.length;e++)if(!A(p.criteria[e]))return!1;return!0}()?y((function(e){return Object(O.a)(Object(O.a)({},e),{},{loseMessage:!0})})):y((function(e){return Object(O.a)(Object(O.a)({},e),{},{winMessage:!0})}))),n===T&&b&&v.instructionsCompleted>t&&v.instructionsCompleted!=l.length&&setTimeout((function(){a(t+1)}),250)))}}})));return Object(h.jsxs)("g",{children:[K.map((function(e,t){var n=I[t];return Object(h.jsx)(B,{object:n.object,x:e.x,y:e.elevation.interpolate((function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 500-e.height-t}(n.object,e)})),costumeIndex:n.costumeNumber,center:!1!==n.object.center,opacity:e.opacity},t)})),Object(h.jsx)(u.a.text,{x:"50%",y:"20%",dominantBaseline:"middle",textAnchor:"middle",opacity:D.opacity,style:{fontSize:"80px",fill:j.colors.text},children:"Mission Success"}),Object(h.jsx)(u.a.text,{x:"50%",y:"20%",dominantBaseline:"middle",textAnchor:"middle",opacity:F.opacity,style:{fontSize:"80px",fill:j.colors.text},children:"Try Again"})]})},G=function(e){var t=e.missionNumber,n=e.objective;return Object(h.jsxs)("div",{style:{fontSize:"24px",textAlign:"center"},children:[Object(h.jsxs)("strong",{children:["Mission ",t," Objective"]}),Object(h.jsx)("br",{}),n]})},V=function(e){var t=e.briefing,n=e.onCompleteBriefing;return Object(h.jsxs)("div",{style:{fontSize:"24px",textAlign:"center"},children:[t,Object(h.jsx)("br",{}),Object(h.jsx)("button",{onClick:n,children:"Continue"})]})},Y="COMPLETE_INTRO",H="COMPLETE_PLANET_INTRO",Z="ZOOM_PLANET_INTRO",J="COMPLETE_BRIEFING",X="ADD_TO_PROGRAM",q="RESET_PROGRAM",Q="SUBMIT_PROGRAM",$="SET_INST_PTR",ee="NEXT_MISSION",te="REPEAT_MISSION",ne=0,oe=1,ce=2,ie=(A={},Object(j.a)(A,Y,(function(e){return Object(O.a)(Object(O.a)({},e),{},{introShown:!0})})),Object(j.a)(A,Z,(function(e){return e.planetIntroStatus===ne?Object(O.a)(Object(O.a)({},e),{},{planetIntroStatus:oe}):e})),Object(j.a)(A,H,(function(e){return Object(O.a)(Object(O.a)({},e),{},{planetIntroStatus:ce})})),Object(j.a)(A,J,(function(e){return Object(O.a)(Object(O.a)({},e),{},{briefingShown:!0})})),Object(j.a)(A,X,(function(e,t){return Object(O.a)(Object(O.a)({},e),{},{program:[].concat(Object(d.a)(e.program),[t])})})),Object(j.a)(A,q,(function(e){return Object(O.a)(Object(O.a)({},e),{},{program:[]})})),Object(j.a)(A,Q,(function(e){return Object(O.a)(Object(O.a)({},e),{},{programSubmitted:!0})})),Object(j.a)(A,$,(function(e,t){return Object(O.a)(Object(O.a)({},e),{},{currentInstruction:t})})),Object(j.a)(A,ee,(function(e){var t=_[e.planetIndex];return e.missionIndex+1<t.missions.length?Object(O.a)(Object(O.a)({},e),{},{missionIndex:e.missionIndex+1,round:e.round+1,program:[],programSubmitted:!1,currentInstruction:0}):e.planetIndex+1<_.length?Object(O.a)(Object(O.a)({},e),{},{planetIndex:e.planetIndex+1,missionIndex:0,round:e.round+1,planetIntroStatus:ne,briefingShown:!1,program:[],programSubmitted:!1,currentInstruction:0}):Object(O.a)(Object(O.a)({},e),{},{done:!0})})),Object(j.a)(A,te,(function(e){return Object(O.a)(Object(O.a)({},e),{},{round:e.round+1,program:[],programSubmitted:!1,currentInstruction:0})})),A),re=function(e,t){var n=t.type,o=t.payload,c=ie[n];return c?c(e,o):e},ae=function(e){var t,n=e.onStartPlaying,o=Object(c.useReducer)(re,{planetIndex:0,missionIndex:0,done:!1,round:0,introShown:!!(t=!1),planetIntroStatus:t?ce:ne,briefingShown:!!t,program:[],programSubmitted:!1,currentInstruction:0}),i=Object(s.a)(o,2),r=i[0],a=i[1],l=function(e,t){return a({type:e,payload:t})},b=r.planetIndex,j=r.missionIndex,d=r.introShown,O=r.planetIntroStatus,m=r.briefingShown,f=r.program,p=r.programSubmitted,v=r.round,y=r.currentInstruction,R=r.done,C=_[b],I=C.missions[j];function k(){l(Y)}function w(){l(Z)}function E(){l(H)}function P(){l(J)}function A(e){l($,e)}var N=Object(u.b)({to:{color:d?O>=oe?C.colors.sky:"black":"rgba(0, 0, 0, 0)"},from:{color:"rgba(0, 0, 0, 0)"},config:{duration:1500}}),M=O==ce,z=M&&m;return R?Object(h.jsx)(L,{}):Object(h.jsxs)("div",{style:{maxWidth:S},children:[Object(h.jsxs)(u.a.svg,{width:S,height:T,className:"scene",style:{backgroundColor:N.color},children:[O>=oe&&Object(h.jsx)(D,{planet:C}),M&&Object(h.jsx)(K,{planet:C,completedMissions:j}),d?M?Object(h.jsx)(W,{currentInstruction:y,planetIndex:b,missionIndex:j,onFailure:function(){return l(te)},onSuccess:function(){return l(ee)},setCurrentInstruction:A,program:f,programSubmitted:p},v):Object(h.jsx)(F,{planetIndex:b,onZoomIntro:w,onCompleteIntro:E}):Object(h.jsx)(U,{onStartPlaying:n,onCompleteIntro:k})]}),M&&(m?Object(h.jsx)(G,{missionNumber:j+1,objective:I.objective}):Object(h.jsx)(V,{briefing:C.briefing,onCompleteBriefing:P})),z&&Object(h.jsx)(g,{addToProgram:function(e){l(X,e)},blocks:x(I.blocks,f),onResetProgram:function(){return l(q)},onSubmitProgram:function(){return l(Q)},program:f,programSubmitted:p})]})},se=n.p+"static/media/amerika.421d9361.mp3",ue=Object(u.a)(b.a),le=function(){var e=Object(c.useState)(!1),t=Object(s.a)(e,2),n=t[0],o=t[1],i=Object(u.b)({to:{volume:n?100:0},from:{volume:0},config:{duration:8e3}});return Object(h.jsxs)("div",{className:"page",children:[Object(h.jsx)("div",{className:"scene-container",children:Object(h.jsx)(ae,{onStartPlaying:function(){return o(!0)}})}),Object(h.jsx)(ue,{url:se,playStatus:n?b.a.status.PLAYING:b.a.status.STOPPED,autoLoad:!0,loop:!0,volume:i.volume})]})},be=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,27)).then((function(t){var n=t.getCLS,o=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),o(e),c(e),i(e),r(e)}))};v.a.pageview(window.location.pathname+window.location.search),a.a.render(Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(le,{})}),document.getElementById("root")),be()}},[[26,1,2]]]);
//# sourceMappingURL=main.65e0b324.chunk.js.map