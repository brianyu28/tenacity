(this.webpackJsonptenacity=this.webpackJsonptenacity||[]).push([[0],{19:function(e,t,o){},25:function(e,t,o){},26:function(e,t,o){"use strict";o.r(t);var a,n=o(2),c=o.n(n),i=o(14),r=o.n(i),s=(o(19),o(6)),l=o(4),b=o(11),u=o.n(b),d=o(3),j=o(7),O=o(0),m=o(5),p="ROCKET_LAUNCH",f={BRIDGE:"BUILD_BRIDGE",FORWARD:"FORWARD",TAKE_PHOTO:"TAKE_PHOTO",TURN:"TURN",PICK_UP:"PICK_UP",DROP:"DROP",PRESS_BUTTON:"PRESS_BUTTON",REPEAT:"REPEAT",END_REPEAT:"END REPEAT",IF_BUTTON_BLUE:"IF_BUTTON_BLUE",IF_CARRYING_BLUE:"IF_CARRYING_BLUE",ELSE:"ELSE",END_IF:"END_IF"},h=(a={},Object(d.a)(a,f.BRIDGE,{name:"Build Bridge"}),Object(d.a)(a,f.FORWARD,{name:"Move Forward"}),Object(d.a)(a,f.TURN,{name:"Turn Around"}),Object(d.a)(a,f.PICK_UP,{name:"Pick Up Object"}),Object(d.a)(a,f.DROP,{name:"Drop Object"}),Object(d.a)(a,f.LAUNCH_ROCKET,{name:"Launch Rocket"}),Object(d.a)(a,f.TAKE_PHOTO,{name:"Take Photo"}),Object(d.a)(a,f.PRESS_BUTTON,{name:"Press Button"}),Object(d.a)(a,f.REPEAT,{name:"Repeat",args:[{key:"count",text:"How many times to repeat?"}]}),Object(d.a)(a,f.END_REPEAT,{name:"End Repeat"}),Object(d.a)(a,f.IF_BUTTON_BLUE,{name:"If Button is Blue"}),Object(d.a)(a,f.IF_CARRYING_BLUE,{name:"If Carrying Blue"}),Object(d.a)(a,f.ELSE,{name:"Else"}),Object(d.a)(a,f.END_IF,{name:"End If"}),a),v=function(e,t){for(var o={},a=0;a<t.length;a++){var n=t[a].block;void 0===o[n]?o[n]=1:o[n]++}return e.reduce((function(e,t){var a=Object(s.a)(t,2),n=a[0],c=a[1];return[].concat(Object(j.a)(e),[[n,c-(o[n]||0)]])}),[])},g=function(e){var t=e.block,o=e.args,a=h[t].name;switch(t){case f.REPEAT:return"".concat(a," ").concat(o.count);default:return a}},x=o(12),y=o.p+"static/media/button_red_unpressed.86163d0f.svg",R=o.p+"static/media/button_red_pressed.108133ca.svg",E=o.p+"static/media/button_blue_unpressed.11c1cc6b.svg",T=o.p+"static/media/button_blue_pressed.14541aa3.svg",k=o.p+"static/media/bridge.76f2dfc2.svg",_=o.p+"static/media/lab.18e56e2e.svg",C=o.p+"static/media/rocket.0dec99f9.svg",I=o.p+"static/media/rover.b107911f.svg",A=o.p+"static/media/rover_flipped.1ce4141d.svg",P=o.p+"static/media/mercury_crater.af0b0b06.svg",N=o.p+"static/media/rock_blue.2c73d521.svg",B=o.p+"static/media/rock_red.31b2b06f.svg",S=o.p+"static/media/volcano.957d8bd8.svg",U=o.p+"static/media/photograph.86f8d649.svg",w=o.p+"static/media/box_samples.3014cc1b.svg",D=o.p+"static/media/box_red.566ab204.svg",L=o.p+"static/media/box_blue.ee76ee2b.svg",F=800,M=600,V=100,K={BRIDGE:{images:[k],height:13.5,width:90},BOX_SAMPLES:{images:[w],height:90,width:90},BOX_RED:{images:[D],height:90,width:90},BOX_BLUE:{images:[L],height:90,width:90},ROVER:{images:[I,A],height:80,width:80},BUTTON_BLUE:{images:[E,T],height:40,width:40},BUTTON_RED:{images:[y,R],height:40,width:40},ROCKET:{images:[C],height:100,width:57},LAB:{images:[_],height:250,width:150},MERCURY_CRATER:{images:[P],height:30,width:90},VENUS_CRATER:{images:[P],height:30,width:90},ROCK_RED:{images:[B],height:30,width:40},ROCK_BLUE:{images:[N],height:30,width:40},VOLCANO:{images:[S],height:100,width:100},PHOTOGRAPH:{images:[U],height:60,width:60}},G=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 500-e.height-t},W={elevation:0,opacity:1,costumeNumber:0},z=[{name:"Mercury",introConfig:{size:15,scale:2,orbitDuration:1e4,textColor:"black"},colors:{main:"#bfbaac",sky:"#7d705b",text:"black"},briefing:"The Tenacity rover has arrived on Mercury. Use the control panel to help Tenacity complete its missions.",missions:[{objective:"Navigate Tenacity back to the spacecraft for refueling.",hint:'Click on a function to add it to Tenacity\'s program. Click "Submit Instructions" when the program is ready to run.',blocks:[[f.FORWARD,2]],items:[Object(O.a)(Object(O.a)({},W),{},{id:"rocket",object:K.ROCKET,x:500}),Object(O.a)(Object(O.a)({},W),{},{id:"rover",object:K.ROVER,x:300})],criteria:[{category:"rover_x",value:500,message:"Tenacity did not make it back to spacecraft."}]},{objective:"Get close to the crater to explore it. But be careful not to fall in!",blocks:[[f.FORWARD,5]],items:[Object(O.a)(Object(O.a)({},W),{},{id:"rocket",object:K.ROCKET,x:100}),Object(O.a)(Object(O.a)({},W),{},{id:"crater",object:K.MERCURY_CRATER,x:500,elevation:-30,allowFall:!0}),Object(O.a)(Object(O.a)({},W),{},{id:"rover",object:K.ROVER,x:100})],criteria:[{category:"rover_x",value:400,message:"Tenacity did not make it close enough to crater."}]},{objective:"Return the rock sample back to the rocket.",blocks:[[f.FORWARD,5],[f.PICK_UP,1],[f.TURN,1]],items:[Object(O.a)(Object(O.a)({},W),{},{id:"rocket",object:K.ROCKET,x:100}),Object(O.a)(Object(O.a)({},W),{},{id:"crater",object:K.MERCURY_CRATER,x:500,elevation:-30,allowFall:!0}),Object(O.a)(Object(O.a)({},W),{},{id:"rock",object:K.ROCK_RED,x:400,elevation:-30,canCarry:!0}),Object(O.a)(Object(O.a)({},W),{},{id:"rover",object:K.ROVER,x:400})],criteria:[{category:"rover_x",value:100,message:"Tenacity did not make it back to rocket."},{category:"rover_carry",value:"rock",message:"Tenacity does not have rock sample."}]},{objective:"We're done here on Mercury! Launch the rocket to head to the next planet.",blocks:[[f.LAUNCH_ROCKET,1]],items:[Object(O.a)(Object(O.a)({},W),{},{id:"rocket",object:K.ROCKET,x:400}),Object(O.a)(Object(O.a)({},W),{},{id:"rover",object:K.ROVER,x:400})],criteria:[{category:"event",value:p,message:"Rocket did not launch."}]}]},{name:"Venus",introConfig:{size:20,scale:1.7,orbitDuration:28900,textColor:"black"},colors:{main:"#ae7c43",sky:"#dbb78f",text:"black"},briefing:"Welcome to Venus! Tenacity's mission is to explore the volcanos on the planet.",missions:[{objective:"Get to the base of the volcano and take a photo.",hint:'To repeat a section of a program multiple times, put it in between a "Repeat" and "End Repeat" instruction.',blocks:[[f.FORWARD,1],[f.TAKE_PHOTO,1],[f.REPEAT,1],[f.END_REPEAT,1]],items:[Object(O.a)(Object(O.a)({},W),{},{id:"volcano",object:K.VOLCANO,x:700}),Object(O.a)(Object(O.a)({},W),{},{id:"rocket",object:K.ROCKET,x:100}),Object(O.a)(Object(O.a)({},W),{},{id:"rover",object:K.ROVER,x:200})],criteria:[{category:"photograph",value:700,message:"Tenacity did not take photograph of volcano."}]},{objective:"Collect the rock sample.",blocks:[[f.FORWARD,2],[f.BRIDGE,1],[f.PICK_UP,1],[f.REPEAT,1],[f.END_REPEAT,1]],items:[Object(O.a)(Object(O.a)({},W),{},{id:"crater",object:K.VENUS_CRATER,x:300,allowFall:!0,elevation:-30}),Object(O.a)(Object(O.a)({},W),{},{id:"rock",object:K.ROCK_RED,x:600,elevation:-30,canCarry:!0}),Object(O.a)(Object(O.a)({},W),{},{id:"rover",object:K.ROVER,x:100})],criteria:[{category:"rover_carry",value:"rock",message:"Tenacity does not have rock sample."}]},{objective:"Take photos at each of the five volcanos.",blocks:[[f.FORWARD,3],[f.TURN,2],[f.TAKE_PHOTO,1],[f.REPEAT,1],[f.END_REPEAT,1]],items:[Object(O.a)(Object(O.a)({},W),{},{id:"volcano1",object:K.VOLCANO,x:200}),Object(O.a)(Object(O.a)({},W),{},{id:"volcano2",object:K.VOLCANO,x:300}),Object(O.a)(Object(O.a)({},W),{},{id:"volcano3",object:K.VOLCANO,x:400}),Object(O.a)(Object(O.a)({},W),{},{id:"volcano4",object:K.VOLCANO,x:500}),Object(O.a)(Object(O.a)({},W),{},{id:"volcano5",object:K.VOLCANO,x:600}),Object(O.a)(Object(O.a)({},W),{},{id:"rover",object:K.ROVER,x:400})],criteria:[{category:"photograph",value:200,message:"Tenacity did not take photograph of all volcano."},{category:"photograph",value:300,message:"Tenacity did not take photograph of all volcano."},{category:"photograph",value:400,message:"Tenacity did not take photograph of all volcano."},{category:"photograph",value:500,message:"Tenacity did not take photograph of all volcano."},{category:"photograph",value:600,message:"Tenacity did not take photograph of all volcano."}]},{objective:"Drop off both rock samples at the rocket.",hint:"Tenacity can only hold one object at a time.",blocks:[[f.FORWARD,5],[f.TURN,1],[f.BRIDGE,1],[f.PICK_UP,1],[f.DROP,1],[f.REPEAT,1],[f.END_REPEAT,1]],items:[Object(O.a)(Object(O.a)({},W),{},{id:"crater1",object:K.VENUS_CRATER,x:500,allowFall:!0,elevation:-30}),Object(O.a)(Object(O.a)({},W),{},{id:"rock1",object:K.ROCK_BLUE,x:600,elevation:-30,canCarry:!0}),Object(O.a)(Object(O.a)({},W),{},{id:"crater2",object:K.VENUS_CRATER,x:300,allowFall:!0,elevation:-30}),Object(O.a)(Object(O.a)({},W),{},{id:"rock2",object:K.ROCK_BLUE,x:200,elevation:-30,canCarry:!0}),Object(O.a)(Object(O.a)({},W),{},{id:"rocket",object:K.ROCKET,x:400}),Object(O.a)(Object(O.a)({},W),{},{id:"rover",object:K.ROVER,x:400})],criteria:[{category:"location_x",id:"rock1",value:400,message:"Both rock samples were not dropped off at rocket."},{category:"location_x",id:"rock2",value:400,message:"Both rock samples were not dropped off at rocket."}]},{objective:"We're done here on Venus! Launch the rocket to head to the next planet.",blocks:[[f.LAUNCH_ROCKET,1]],items:[Object(O.a)(Object(O.a)({},W),{},{id:"crater1",object:K.VENUS_CRATER,x:500,allowFall:!0,elevation:-30}),Object(O.a)(Object(O.a)({},W),{},{id:"crater2",object:K.VENUS_CRATER,x:300,allowFall:!0,elevation:-30}),Object(O.a)(Object(O.a)({},W),{},{id:"rocket",object:K.ROCKET,x:400}),Object(O.a)(Object(O.a)({},W),{},{id:"rover",object:K.ROVER,x:400})],criteria:[{category:"event",value:p,message:"Rocket did not launch."}]}]},{name:"Earth",introConfig:{size:21,scale:1.3,orbitDuration:47e3,textColor:"black"},colors:{main:"#34bf9a",sky:"#9df2ee",text:"black"},briefing:"The Tenacity rover has arrived on Earth. Deliver the rock samples to the lab before proceeding to the next planet.",missions:[{objective:"Unlock the lab. To unlock the lab, press all of the blue buttons without pressing the red button.",hint:'Any instructions between an "If" and an "End If" instruction will only run if the "If" condition is true.',blocks:[[f.FORWARD,1],[f.PRESS_BUTTON,1],[f.REPEAT,1],[f.END_REPEAT,1],[f.IF_BUTTON_BLUE,1],[f.END_IF,1]],items:[Object(O.a)(Object(O.a)({},W),{},{id:"lab",object:K.LAB,x:400}),Object(O.a)(Object(O.a)({},W),{},{id:"button1",object:K.BUTTON_BLUE,x:400,elevation:70,button:!0}),Object(O.a)(Object(O.a)({},W),{},{id:"button2",object:K.BUTTON_RED,x:500,elevation:70,button:!0}),Object(O.a)(Object(O.a)({},W),{},{id:"button3",object:K.BUTTON_BLUE,x:600,elevation:70,button:!0}),Object(O.a)(Object(O.a)({},W),{},{id:"rover",object:K.ROVER,x:300})],criteria:[{category:"button_press",id:"button1",value:!0,message:"Tenacity did not press all blue buttons."},{category:"button_press",id:"button2",value:!1,message:"Tenacity pressed a red button."},{category:"button_press",id:"button3",value:!0,message:"Tenacity did not press all blue buttons."}]},{objective:'There is one rock sample in the "Samples" box. Move it to the appropriately labeled color box.',hint:'Red rocks should go to the "Red" box and blue rocks should go to the "Blue" box.',blocks:[[f.FORWARD,5],[f.PICK_UP,1],[f.DROP,1],[f.IF_CARRYING_BLUE,1],[f.END_IF,1]],items:[Object(O.a)(Object(O.a)({},W),{},{id:"rock",object:K.ROCK_BLUE,x:200,elevation:-50,canCarry:!0,color:"blue"}),Object(O.a)(Object(O.a)({},W),{},{id:"box_samples",object:K.BOX_SAMPLES,x:200,elevation:-100}),Object(O.a)(Object(O.a)({},W),{},{id:"box_red",object:K.BOX_RED,x:400,elevation:-100}),Object(O.a)(Object(O.a)({},W),{},{id:"box_blue",object:K.BOX_BLUE,x:500,elevation:-100}),Object(O.a)(Object(O.a)({},W),{},{id:"rover",object:K.ROVER,x:200})],criteria:[{category:"location_x",id:"rock",value:500,message:"Rock sample did not end up in blue box."}]},{objective:'There is one rock sample in the "Samples" box. Move it to the appropriately labeled color box.',blocks:[[f.FORWARD,5],[f.PICK_UP,1],[f.DROP,1],[f.IF_CARRYING_BLUE,1],[f.ELSE,1],[f.END_IF,1]],items:[Object(O.a)(Object(O.a)({},W),{},{id:"rock",object:K.ROCK_RED,x:200,elevation:-50,canCarry:!0,color:"red"}),Object(O.a)(Object(O.a)({},W),{},{id:"box_samples",object:K.BOX_SAMPLES,x:200,elevation:-100}),Object(O.a)(Object(O.a)({},W),{},{id:"box_red",object:K.BOX_RED,x:500,elevation:-100}),Object(O.a)(Object(O.a)({},W),{},{id:"box_blue",object:K.BOX_BLUE,x:400,elevation:-100}),Object(O.a)(Object(O.a)({},W),{},{id:"rover",object:K.ROVER,x:200})],criteria:[{category:"location_x",id:"rock",value:500,message:"Rock sample did not end up in red box."}]},{objective:'There are three rock sample in the "Samples" box. Move each of them to the appropriately labeled color box.',blocks:[[f.FORWARD,7],[f.TURN,4],[f.PICK_UP,1],[f.DROP,2],[f.IF_CARRYING_BLUE,1],[f.ELSE,1],[f.END_IF,1],[f.REPEAT,1],[f.END_REPEAT,1]],items:[Object(O.a)(Object(O.a)({},W),{},{id:"rock1",object:K.ROCK_RED,x:200,elevation:-50,canCarry:!0,color:"red"}),Object(O.a)(Object(O.a)({},W),{},{id:"rock2",object:K.ROCK_BLUE,x:200,elevation:-51,canCarry:!0,color:"blue"}),Object(O.a)(Object(O.a)({},W),{},{id:"rock3",object:K.ROCK_RED,x:200,elevation:-52,canCarry:!0,color:"red"}),Object(O.a)(Object(O.a)({},W),{},{id:"box_samples",object:K.BOX_SAMPLES,x:200,elevation:-100}),Object(O.a)(Object(O.a)({},W),{},{id:"box_red",object:K.BOX_RED,x:400,elevation:-100}),Object(O.a)(Object(O.a)({},W),{},{id:"box_blue",object:K.BOX_BLUE,x:500,elevation:-100}),Object(O.a)(Object(O.a)({},W),{},{id:"rover",object:K.ROVER,x:200})],criteria:[{category:"location_x",id:"rock1",value:400,message:"Red rock sample did not end up in red box."},{category:"location_x",id:"rock2",value:500,message:"Blue rock sample did not end up in blue box."},{category:"location_x",id:"rock3",value:400,message:"Red rock sample did not end up in red box."}]},{objective:"We're done here on Earth! Launch the rocket to head to the next planet.",blocks:[[f.LAUNCH_ROCKET,1]],items:[Object(O.a)(Object(O.a)({},W),{},{id:"rocket",object:K.ROCKET,x:400}),Object(O.a)(Object(O.a)({},W),{},{id:"rover",object:K.ROVER,x:400})],criteria:[{category:"event",value:p,message:"Rocket did not launch."}]}]}];x.a.initialize("UA-123778931-5");var H,Y=function(e,t){return"".concat(z[e].name,", Mission ").concat(t+1)},X=function(e){x.a.event(e)},J=o(1),Z=function(e){var t=e.addToProgram,o=e.blocks,a=e.onResetProgram,n=e.onSubmitProgram,c=e.program,i=e.programSubmitted,r=e.planetIndex,l=e.missionIndex;return Object(J.jsx)("div",{id:"control-panel",children:Object(J.jsxs)("div",{id:"control-panel-container",children:[Object(J.jsxs)("div",{children:[Object(J.jsx)("div",{id:"program",children:c.map((function(e,t){return Object(J.jsx)("div",{children:g(e)},t)}))}),!i&&Object(J.jsxs)("div",{children:[Object(J.jsx)("button",{onClick:a,children:"Reset"}),Object(J.jsx)("button",{onClick:function(){var e=function(e){for(var t=[],o=[],a=0;a<e.length;a++){var n=Object.assign({},e[a]);n.meta={id:a};var c=void 0;switch(n.block){case f.REPEAT:o.push({type:f.REPEAT,line:a});var i=parseInt(n.args.count);if(isNaN(i))return{isValid:!1,error:"Tenacity only understands an integer number of times to repeat!"};n.args.count=i;break;case f.END_REPEAT:if(void 0===(c=o.pop()))return{isValid:!1,error:"Tenacity can only End Repeat after a matching Repeat instruction."};if(c.type!==f.REPEAT)return{isValid:!1,error:"Tenacity tried to End Repeat, but it looks like some other part of the program needs to be resolved first."};n.meta.jumpBackTo=c.line,t[c.line].meta.jumpTo=a+1;break;case f.IF_BUTTON_BLUE:case f.IF_CARRYING_BLUE:o.push({type:n.block,condition:!0,line:a});break;case f.ELSE:if(void 0===(c=o.pop()))return{isValid:!1,error:"Tenacity can only have an Else after a matching If instruction."};if(!0!==c.condition)return{isValid:!1,error:"Tenacity tried to Else, but it looks like some other part of the program needs to be resolved first."};if(void 0!==t[c.line].meta.elseJump)return{isValid:!1,error:"An If instruction can only have one Else expression."};t[c.line].meta.elseIndex=a,t[c.line].meta.elseJump=a+1,o.push(c);break;case f.END_IF:if(void 0===(c=o.pop()))return{isValid:!1,error:"Tenacity can only End If after a matching If instruction."};if(!0!==c.condition)return{isValid:!1,error:"Tenacity tried to End If, but it looks like some other part of the program needs to be resolved first."};t[c.line].meta.jumpTo=a+1;var r=t[c.line].meta.elseIndex;void 0!==r&&(t[r].meta.jumpTo=a+1)}t.push(n)}var s=o.pop();return void 0!==s?s.type===f.REPEAT?{isValid:!1,error:"Tenacity found a Repeat instruction, but it needs a matching End Repeat instruction so that it knows when to stop repeating."}:!0===s.condition?{isValid:!1,error:"Tenacity found an If instruction, but it needs a matching End If instruction so that it knows when the condition ends."}:{isValid:!1,error:"Tenacity found a mistake in the program."}:{isValid:!0,augmentedProgram:t}}(c),t=e.isValid,o=e.augmentedProgram,a=e.error;if(!t)return X({category:"Error",action:"Invalid Program Error",label:Y(r,l),value:a}),void alert(a);window.scrollTo({top:0,behavior:"smooth"}),setTimeout((function(){n(o)}),1e3)},children:"Submit Instructions"})]})]}),Object(J.jsx)("div",{id:"blocks",children:o.map((function(e,o){var a=Object(s.a)(e,2),n=a[0],c=a[1];return 0!==c&&Object(J.jsxs)("button",{className:"block",onClick:function(){return function(e){if(!i){var o=h[e],a={};if(void 0!==o.args){var n,c=Object(m.a)(o.args);try{for(c.s();!(n=c.n()).done;){var r=n.value;if(a[r.key]=window.prompt(r.text),null===a[r.key])return}}catch(s){c.e(s)}finally{c.f()}}t(e,a)}}(n)},children:[h[n].name," (x",c,")"]},o)}))})]})})},q=(o(25),function(e){var t=e.onCompleteIntro,o=e.onStartPlaying,a=Object(n.useState)(!1),c=Object(s.a)(a,2),i=c[0],r=c[1],b=Object(l.b)({to:{opacity:i?0:1},from:{opacity:0},config:{duration:1500},onRest:function(){i&&t()}}),u=function(){X({category:"Game",action:"Play Game"}),o(),r(!0)};return Object(J.jsxs)(l.a.g,{opacity:b.opacity,children:[Object(J.jsx)("text",{x:"50%",y:"30%",dominantBaseline:"middle",textAnchor:"middle",className:"titleText",opacity:b.opacity,children:"Tenacity"}),Object(J.jsx)("text",{x:"50%",y:"45%",dominantBaseline:"middle",textAnchor:"middle",className:"subheadText",opacity:b.opacity,children:"A game by Brian Yu"}),Object(J.jsx)("rect",{x:300,y:"360",height:80,width:200,rx:20,fill:"white",className:"hoverable",onClick:u}),Object(J.jsx)("text",{x:400,y:"400",dominantBaseline:"middle",textAnchor:"middle",style:{fontSize:"48px",fill:"black"},className:"hoverable",onClick:u,children:"Play"})]})}),Q=function(){return Object(J.jsxs)("div",{style:{maxWidth:"500px"},children:[Object(J.jsx)("div",{children:"Tenacity is a work in progress, and you've reached the end of what's been developed so far! Check back soon for more missions."}),Object(J.jsx)("br",{}),Object(J.jsxs)("div",{children:["Tenacity is developed by Brian Yu at Harvard Graduate School of Education. While the game is in development, I would love to hear thoughts, feedback, and recommendations: you can reach me at ",Object(J.jsx)("a",{style:{color:"white"},href:"mailto:brian@brianyu.me",children:"brian@brianyu.me"}),"."]})]})},$=function(e){var t=e.planet;return Object(J.jsxs)("g",{children:[Object(J.jsx)("rect",{x:0,y:500,width:F,height:V,fill:t.colors.main}),Object(j.a)(Array(8).keys()).map((function(e){return Object(J.jsx)("rect",{x:100*e-.5,y:500,width:1,height:10},e)}))]})},ee=function(e){var t=e.onCompleteIntro,o=e.onZoomIntro,a=e.planetIndex,c=z[a],i=c.introConfig.scale,r=Object(n.useState)(!1),b=Object(s.a)(r,2),u=b[0],d=b[1],j=Object(n.useState)(!1),O=Object(s.a)(j,2),m=O[0],p=O[1],f=Object(n.useState)(!1),h=Object(s.a)(f,2),v=h[0],g=h[1],x=Object(n.useState)(!1),y=Object(s.a)(x,2),R=y[0],E=y[1],T=Object(l.b)({to:{opacity:1},from:{opacity:0},config:{duration:1500},delay:1500}),k=Object(l.b)({to:{opacity:1},from:{opacity:0},config:{duration:1500},delay:3e3}),_=Object(l.b)({to:{angle:4*Math.PI},from:{angle:0},config:{duration:2e4},reset:u,onRest:function(){return d((function(e){return!e}))}}),C=Object(l.b)({to:{zoom:v?1:0},from:{zoom:0},config:{duration:1e3},onRest:function(){v&&(o(),E(!0))}}),I=Object(l.b)({to:{opacity:m?0:1},from:{opacity:1},config:{duration:2e3},onRest:function(){m&&t()}}),A=Object(l.b)({to:{opacity:R?1:0},from:{opacity:0},config:{duration:1e3},onRest:function(){R&&setTimeout((function(){p(!0)}),2e3)}}),P=z.slice(0,1+a).map((function(e,t){var o=t==a,n=100+50*t;return Object(J.jsxs)(l.a.g,{opacity:k.opacity,children:[Object(J.jsx)(l.a.circle,{cx:400,cy:300,r:n*i,fillOpacity:0,stroke:"white",strokeWidth:2}),Object(J.jsx)(l.a.circle,{cx:_.angle.interpolate((function(t){return 400+i*(n*Math.cos(t*(1e4/e.introConfig.orbitDuration)))})),cy:_.angle.interpolate((function(t){return 300-i*(n*Math.sin(t*(1e4/e.introConfig.orbitDuration)))})),r:o?C.zoom.interpolate((function(t){return e.introConfig.size*i+t*(1600-e.introConfig.size*i)})):e.introConfig.size*i,style:{fill:e.colors.main}})]},t)}));return Object(n.useEffect)((function(){var e=setTimeout((function(){g(!0)}),1e4);return function(){return clearTimeout(e)}}),[]),Object(J.jsxs)(l.a.g,{opacity:I.opacity,children:[Object(J.jsx)(l.a.circle,{cx:400,cy:300,r:50*i,style:{fill:"#f0f067"},opacity:T.opacity}),P,Object(J.jsx)(l.a.text,{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",style:{fontSize:"80px",fill:c.introConfig.textColor},opacity:A.opacity,children:c.name})]})},te=function(e){var t=e.planet,o=e.completedMissions;return Object(J.jsxs)("g",{children:[Object(J.jsx)("text",{textAnchor:"end",dominantBaseline:"hanging",x:785,y:15,style:{fill:t.colors.text,fontSize:"24px"},children:t.name}),t.missions.map((function(e,a){return Object(J.jsx)("circle",{cx:35+55*a,cy:35,r:20,style:{fill:o>a?t.colors.main:"rgba(0, 0, 0, 0)",stroke:t.colors.main,strokeWidth:o>a?0:1}},a)}))]})},oe=function(e){var t=e.object,o=e.x,a=e.y,n=e.center,c=e.costumeIndex,i=e.opacity;return void 0===c&&(c=0),Object(J.jsx)("image",{href:t.images[c],height:t.height,x:!1===n?o:o-t.width/2,y:a,opacity:i})},ae=100,ne=Object(l.a)(oe),ce=function(e){var t=e.planetIndex,o=e.missionIndex,a=e.onSuccess,c=e.onFailure,i=e.program,r=e.programSubmitted,b=z[t],u=b.missions[o];Object(n.useEffect)((function(){X({category:"Level",action:"Start Level",label:Y(t,o)})}),[o,t]);var h=Object(n.useState)({startTime:new Date,currentInstruction:0,instructionsCompleted:0,items:u.items,winMessage:!1,loseMessage:!1,photographs:[],bridges:[],buttons:[],loopMetadata:{},events:[]}),v=Object(s.a)(h,2),g=v[0],x=v[1],y=g.startTime,R=g.currentInstruction,E=g.instructionsCompleted,T=g.items,k=g.photographs,_=g.bridges,C=g.buttons,I=g.winMessage,A=g.loseMessage,P=T.findIndex((function(e){return"rover"===e.id})),N=-1!==P?T[P]:null,B=T.findIndex((function(e){return"rocket"===e.id})),S=-1!==B?T[B]:null;function U(e){switch(e.category){case"rover_x":return e.value===N.x;case"location_x":var t,o=Object(m.a)(T);try{for(o.s();!(t=o.n()).done;){var a=t.value;if(a.id===e.id&&a.x===e.value)return!0}}catch(p){o.e(p)}finally{o.f()}return!1;case"rover_carry":var n,c=Object(m.a)(T);try{for(c.s();!(n=c.n()).done;){var i=n.value;if(i.id===e.value&&!0===i.carried)return!0}}catch(p){c.e(p)}finally{c.f()}return!1;case"event":var r,s=Object(m.a)(g.events);try{for(s.s();!(r=s.n()).done;){var l=r.value;if(e.value===l)return!0}}catch(p){s.e(p)}finally{s.f()}return!1;case"photograph":var b,u=Object(m.a)(k);try{for(u.s();!(b=u.n()).done;){var d=b.value;if(e.value===d)return!0}}catch(p){u.e(p)}finally{u.f()}return!1;case"button_press":var j,O=Object(m.a)(C);try{for(O.s();!(j=O.n()).done;){if(j.value===e.id)return e.value}}catch(p){O.e(p)}finally{O.f()}return!e.value;default:return console.log("Error: Unknown criterion."),!1}}function w(){var e,t=Object(m.a)(T);try{for(t.s();!(e=t.n()).done;){var o=e.value;if(o.carried)return o}}catch(a){t.e(a)}finally{t.f()}return null}function D(e){return e.map((function(e,t){return t===P?Object(O.a)(Object(O.a)({},N),{},{util:(N.util||0)+1}):e}))}if(r&&R<i.length&&E===R&&!I&&!A){var L,F,M=i[R];switch(M.block){case f.FORWARD:x((function(e){return Object(O.a)(Object(O.a)({},e),{},{instructionsCompleted:e.instructionsCompleted+1,items:e.items.map((function(e,t){return t===P||!0===e.carried?Object(O.a)(Object(O.a)({},e),{},{x:0===N.costumeNumber?e.x+ae:e.x-ae}):e}))})}));break;case f.TURN:x((function(e){return Object(O.a)(Object(O.a)({},e),{},{instructionsCompleted:e.instructionsCompleted+1,items:e.items.map((function(e,t){return t===P?Object(O.a)(Object(O.a)({},N),{},{costumeNumber:0===N.costumeNumber?1:0}):e}))})}));break;case f.PICK_UP:L=function(){var e,t=null,o=Object(m.a)(T);try{for(o.s();!(e=o.n()).done;){var a=e.value;!a.carried&&a.canCarry&&a!==N&&a.x===N.x&&(null===t||a.elevation>t.elevation)&&(t=a)}}catch(n){o.e(n)}finally{o.f()}return t}(),x(null!==L?function(e){return Object(O.a)(Object(O.a)({},e),{},{instructionsCompleted:e.instructionsCompleted+1,items:e.items.map((function(e,t){return e===L?Object(O.a)(Object(O.a)({},L),{},{elevation:30,prevElevation:L.elevation,carried:!0}):t===P?Object(O.a)(Object(O.a)({},N),{},{util:(N.util||0)+1}):e}))})}:function(e){return Object(O.a)(Object(O.a)({},e),{},{instructionsCompleted:e.instructionsCompleted+1,items:D(e.items)})});break;case f.DROP:L=w(),x(null!==L?function(e){return Object(O.a)(Object(O.a)({},e),{},{instructionsCompleted:e.instructionsCompleted+1,items:e.items.map((function(e,t){return e===L?Object(O.a)(Object(O.a)({},L),{},{elevation:L.prevElevation,carried:!1}):t===P?Object(O.a)(Object(O.a)({},N),{},{util:(N.util||0)+1}):e}))})}:function(e){return Object(O.a)(Object(O.a)({},e),{},{instructionsCompleted:e.instructionsCompleted+1,items:D(e.items)})});break;case f.LAUNCH_ROCKET:var V=S&&N&&S.x===N.x;x((function(e){return Object(O.a)(Object(O.a)({},e),{},{instructionsCompleted:e.instructionsCompleted+1,items:V?e.items.map((function(e,t){return t===P?Object(O.a)(Object(O.a)({},N),{},{opacity:-10}):t===B?Object(O.a)(Object(O.a)({},S),{},{elevation:600}):e})):e.items,events:[].concat(Object(j.a)(e.events),[p])})}));break;case f.REPEAT:var W=g.loopMetadata[M.meta.id]||0;W>=M.args.count?x((function(e){return Object(O.a)(Object(O.a)({},e),{},{currentInstruction:M.meta.jumpTo-1,instructionsCompleted:M.meta.jumpTo,items:D(e.items)})})):x((function(e){return Object(O.a)(Object(O.a)({},e),{},{currentInstruction:e.currentInstruction+1,instructionsCompleted:e.instructionsCompleted+1,items:D(e.items),loopMetadata:Object(O.a)(Object(O.a)({},e.loopMetadata),{},Object(d.a)({},M.meta.id,W+1))})}));break;case f.END_REPEAT:x((function(e){return Object(O.a)(Object(O.a)({},e),{},{currentInstruction:M.meta.jumpBackTo,instructionsCompleted:M.meta.jumpBackTo,items:D(e.items)})}));break;case f.IF_BUTTON_BLUE:var H,Z=!1,q=Object(m.a)(T);try{for(q.s();!(H=q.n()).done;){var Q=H.value;if(Q.x===N.x&&Q.object===K.BUTTON_BLUE){Z=!0;break}}}catch(ce){q.e(ce)}finally{q.f()}Z?x((function(e){return Object(O.a)(Object(O.a)({},e),{},{instructionsCompleted:e.instructionsCompleted+1,items:D(e.items)})})):(F=void 0===M.meta.elseJump?M.meta.jumpTo:M.meta.elseJump,x((function(e){return Object(O.a)(Object(O.a)({},e),{},{currentInstruction:F-1,instructionsCompleted:F,items:D(e.items)})})));break;case f.IF_CARRYING_BLUE:(L=w())&&"blue"===L.color?x((function(e){return Object(O.a)(Object(O.a)({},e),{},{instructionsCompleted:e.instructionsCompleted+1,items:D(e.items)})})):(F=void 0===M.meta.elseJump?M.meta.jumpTo:M.meta.elseJump,x((function(e){return Object(O.a)(Object(O.a)({},e),{},{currentInstruction:F-1,instructionsCompleted:F,items:D(e.items)})})));break;case f.ELSE:F=M.meta.jumpTo,x((function(e){return Object(O.a)(Object(O.a)({},e),{},{currentInstruction:F-1,instructionsCompleted:F,items:D(e.items)})}));break;case f.END_IF:x((function(e){return Object(O.a)(Object(O.a)({},e),{},{instructionsCompleted:e.instructionsCompleted+1,items:D(e.items)})}));break;case f.PRESS_BUTTON:L=function(){var e,t=Object(m.a)(T);try{for(t.s();!(e=t.n()).done;){var o=e.value;if(!0===o.button&&o.x===N.x)return o}}catch(ce){t.e(ce)}finally{t.f()}return null}(),x(null!==L?function(e){return Object(O.a)(Object(O.a)({},e),{},{instructionsCompleted:e.instructionsCompleted+1,buttons:[].concat(Object(j.a)(e.buttons),[L.id]),items:e.items.map((function(e,t){return e.id===L.id?Object(O.a)(Object(O.a)({},e),{},{costumeNumber:1}):e}))})}:function(e){return Object(O.a)(Object(O.a)({},e),{},{loseMessage:"Tenacity tried to press a button that wasn't there."})});break;case f.TAKE_PHOTO:x((function(e){return Object(O.a)(Object(O.a)({},e),{},{instructionsCompleted:e.instructionsCompleted+1,photographs:[].concat(Object(j.a)(e.photographs),[N.x]),items:D(e.items)})}));break;case f.BRIDGE:var $=0===N.costumeNumber?N.x+ae:N.x-ae;!function(e){var t,o=Object(m.a)(T);try{for(o.s();!(t=o.n()).done;){var a=t.value;if(a.allowFall&&a.x===e)return!0}}catch(ce){o.e(ce)}finally{o.f()}return!1}($)?x((function(e){return Object(O.a)(Object(O.a)({},e),{},{loseMessage:"Tenacity can only build bridges over craters."})})):x((function(e){return Object(O.a)(Object(O.a)({},e),{},{instructionsCompleted:e.instructionsCompleted+1,bridges:[].concat(Object(j.a)(e.bridges),[$]),items:D(e.items)})}));break;default:console.log("ERROR: Unknown block.")}}var ee=Object(l.b)({to:{opacity:I?1:0},from:{opacity:0},config:{duration:1e3},delay:500,onRest:function(){I&&(X({category:"Level",action:"Win Level",label:Y(t,o),value:Math.round((new Date-y)/1e3)}),setTimeout((function(){a()}),2500))}}),te=Object(l.b)({to:{opacity:A?1:0},from:{opacity:0},config:{duration:1e3},delay:500,onRest:function(){A&&(X({category:"Level",action:"Lose Level",label:Y(t,o),value:Math.round((new Date-y)/1e3)}),setTimeout((function(){c()}),2500))}}),oe=Object(l.c)(T.length,T.map((function(e,t){return{to:{x:e.x,elevation:e.elevation,opacity:e.opacity,util:e.util||0},config:{duration:1e3},onRest:function(){if(!I&&!A)if(t===P&&r&&function(e){var t,o=Object(m.a)(_);try{for(o.s();!(t=o.n()).done;)if(t.value===e.x)return!1}catch(ce){o.e(ce)}finally{o.f()}var a,n=Object(m.a)(T);try{for(n.s();!(a=n.n()).done;){var c=a.value;if(c.allowFall&&c.x===e.x&&0===e.elevation)return!0}}catch(ce){n.e(ce)}finally{n.f()}return!1}(e))x((function(e){return Object(O.a)(Object(O.a)({},e),{},{items:e.items.map((function(e,t){return t===P||!0===e.carried?Object(O.a)(Object(O.a)({},e),{},{elevation:e.elevation-20}):e})),loseMessage:"Tenacity fell into crater."})}));else{if(t===P&&r&&g.instructionsCompleted===i.length){var o=function(){for(var e=0;e<u.criteria.length;e++)if(!U(u.criteria[e]))return{isWin:!1,message:u.criteria[e].message||!0};return{isWin:!0}}(),a=o.isWin,n=o.message;x(a?function(e){return Object(O.a)(Object(O.a)({},e),{},{winMessage:!0})}:function(e){return Object(O.a)(Object(O.a)({},e),{},{loseMessage:n})})}t===P&&r&&g.instructionsCompleted>R&&g.instructionsCompleted!==i.length&&setTimeout((function(){x((function(e){return Object(O.a)(Object(O.a)({},e),{},{currentInstruction:e.currentInstruction+1})}))}),250)}}}})));return Object(J.jsxs)("g",{children:[oe.map((function(e,t){var o=T[t];return Object(J.jsx)(ne,{object:o.object,x:e.x,y:e.elevation.interpolate((function(e){return G(o.object,e)})),costumeIndex:o.costumeNumber,center:!1!==o.object.center,opacity:e.opacity},t)})),_.map((function(e,t){var o=K.BRIDGE;return Object(J.jsx)(ne,{object:o,x:e,y:G(o,-o.height),costumeIndex:0,center:!0,opacity:1},t)})),k.map((function(e,t){var o=K.PHOTOGRAPH;return Object(J.jsx)(ne,{object:o,x:e,y:G(o,-80),costumeIndex:0,center:!0,opacity:1},t)})),Object(J.jsx)(l.a.text,{x:"50%",y:"20%",dominantBaseline:"middle",textAnchor:"middle",opacity:ee.opacity,style:{fontSize:"80px",fill:b.colors.text},children:"Mission Success"}),Object(J.jsx)(l.a.text,{x:"50%",y:"20%",dominantBaseline:"middle",textAnchor:"middle",opacity:te.opacity,style:{fontSize:"80px",fill:b.colors.text},children:"Try Again"}),Object(J.jsx)(l.a.text,{x:"50%",y:"35%",dominantBaseline:"middle",textAnchor:"middle",opacity:te.opacity,style:{fontSize:"30px",fill:b.colors.text},children:!0===A?"":A})]})},ie=function(e){var t=e.missionNumber,o=e.objective,a=e.hint;return Object(J.jsxs)("div",{style:{fontSize:"24px",textAlign:"center"},children:[Object(J.jsxs)("strong",{children:["Mission ",t," Objective"]}),Object(J.jsx)("br",{}),o,a&&Object(J.jsxs)("div",{style:{fontSize:"18px",textAlign:"center"},children:[Object(J.jsx)("hr",{}),a,Object(J.jsx)("br",{})]})]})},re=function(e){var t=e.briefing,o=e.onCompleteBriefing;return Object(J.jsxs)("div",{style:{fontSize:"24px",textAlign:"center"},children:[t,Object(J.jsx)("br",{}),Object(J.jsx)("button",{onClick:o,children:"Continue"})]})},se="COMPLETE_INTRO",le="COMPLETE_PLANET_INTRO",be="ZOOM_PLANET_INTRO",ue="COMPLETE_BRIEFING",de="ADD_TO_PROGRAM",je="RESET_PROGRAM",Oe="SUBMIT_PROGRAM",me="NEXT_MISSION",pe="REPEAT_MISSION",fe=0,he=1,ve=2,ge=(H={},Object(d.a)(H,se,(function(e){return Object(O.a)(Object(O.a)({},e),{},{introShown:!0})})),Object(d.a)(H,be,(function(e){return e.planetIntroStatus===fe?Object(O.a)(Object(O.a)({},e),{},{planetIntroStatus:he}):e})),Object(d.a)(H,le,(function(e){return Object(O.a)(Object(O.a)({},e),{},{planetIntroStatus:ve})})),Object(d.a)(H,ue,(function(e){return Object(O.a)(Object(O.a)({},e),{},{briefingShown:!0})})),Object(d.a)(H,de,(function(e,t){var o=t.block,a=t.args;return Object(O.a)(Object(O.a)({},e),{},{program:[].concat(Object(j.a)(e.program),[{block:o,args:a}])})})),Object(d.a)(H,je,(function(e){return Object(O.a)(Object(O.a)({},e),{},{program:[]})})),Object(d.a)(H,Oe,(function(e,t){return Object(O.a)(Object(O.a)({},e),{},{program:t,programSubmitted:!0})})),Object(d.a)(H,me,(function(e){var t=z[e.planetIndex];return e.missionIndex+1<t.missions.length?Object(O.a)(Object(O.a)({},e),{},{missionIndex:e.missionIndex+1,round:e.round+1,program:[],programSubmitted:!1}):e.planetIndex+1<z.length?Object(O.a)(Object(O.a)({},e),{},{planetIndex:e.planetIndex+1,missionIndex:0,round:e.round+1,planetIntroStatus:fe,briefingShown:!1,program:[],programSubmitted:!1}):Object(O.a)(Object(O.a)({},e),{},{done:!0})})),Object(d.a)(H,pe,(function(e){return Object(O.a)(Object(O.a)({},e),{},{round:e.round+1,program:[],programSubmitted:!1})})),H),xe=function(e,t){var o=t.type,a=t.payload,n=ge[o];return n?n(e,a):e},ye=function(e){var t,o=e.onStartPlaying,a=Object(n.useReducer)(xe,{planetIndex:0,missionIndex:0,done:!1,round:0,introShown:!!(t=!1),planetIntroStatus:t?ve:fe,briefingShown:!!t,program:[],programSubmitted:!1}),c=Object(s.a)(a,2),i=c[0],r=c[1],b=function(e,t){return r({type:e,payload:t})},u=i.planetIndex,d=i.missionIndex,j=i.introShown,O=i.planetIntroStatus,m=i.briefingShown,p=i.program,f=i.programSubmitted,h=i.round,g=i.done,x=z[u],y=x.missions[d];function R(){b(se)}function E(){b(be)}function T(){b(le)}function k(){b(ue)}var _=Object(l.b)({to:{color:j?O>=he?x.colors.sky:"black":"rgba(0, 0, 0, 0)"},from:{color:"rgba(0, 0, 0, 0)"},config:{duration:1500}}),C=O===ve,I=C&&m;return g?Object(J.jsx)(Q,{}):Object(J.jsxs)("div",{style:{maxWidth:F},children:[Object(J.jsxs)(l.a.svg,{width:F,height:M,className:"scene",style:{backgroundColor:_.color},children:[O>=he&&Object(J.jsx)($,{planet:x}),C&&Object(J.jsx)(te,{planet:x,completedMissions:d}),j?C?Object(J.jsx)(ce,{planetIndex:u,missionIndex:d,onFailure:function(){return b(pe)},onSuccess:function(){return b(me)},program:p,programSubmitted:f},h):Object(J.jsx)(ee,{planetIndex:u,onZoomIntro:E,onCompleteIntro:T}):Object(J.jsx)(q,{onStartPlaying:o,onCompleteIntro:R})]}),C&&(m?Object(J.jsx)(ie,{missionNumber:d+1,objective:y.objective,hint:y.hint}):Object(J.jsx)(re,{briefing:x.briefing,onCompleteBriefing:k})),I&&Object(J.jsx)(Z,{planetIndex:u,missionIndex:d,addToProgram:function(e,t){b(de,{block:e,args:t})},blocks:v(y.blocks,p),onResetProgram:function(){return b(je)},onSubmitProgram:function(e){return b(Oe,e)},program:p,programSubmitted:f})]})},Re=o.p+"static/media/amerika.421d9361.mp3",Ee=Object(l.a)(u.a),Te=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),o=t[0],a=t[1],c=Object(l.b)({to:{volume:o?100:0},from:{volume:0},config:{duration:8e3}});return Object(J.jsxs)("div",{className:"page",children:[Object(J.jsx)("div",{className:"scene-container",children:Object(J.jsx)(ye,{onStartPlaying:function(){return a(!0)}})}),Object(J.jsx)(Ee,{url:Re,playStatus:o?u.a.status.PLAYING:u.a.status.STOPPED,autoLoad:!0,loop:!0,volume:c.volume})]})},ke=function(e){e&&e instanceof Function&&o.e(3).then(o.bind(null,27)).then((function(t){var o=t.getCLS,a=t.getFID,n=t.getFCP,c=t.getLCP,i=t.getTTFB;o(e),a(e),n(e),c(e),i(e)}))};x.a.pageview(window.location.pathname+window.location.search),r.a.render(Object(J.jsx)(c.a.StrictMode,{children:Object(J.jsx)(Te,{})}),document.getElementById("root")),ke()}},[[26,1,2]]]);
//# sourceMappingURL=main.d4214b08.chunk.js.map