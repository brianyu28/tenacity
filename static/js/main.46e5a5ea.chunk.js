(this.webpackJsonptenacity=this.webpackJsonptenacity||[]).push([[0],{18:function(t,e,n){},24:function(t,e,n){},25:function(t,e,n){"use strict";n.r(e);var o=n(1),c=n.n(o),i=n(13),r=n.n(i),a=(n(18),n(4)),s=n(3),u=n(10),l=n.n(u),b=n(5),j=n(6),d=n(2),O="FORWARD",m=Object(b.a)({},O,{name:"Move Forward"}),f=function(t,e){for(var n={},o=0;o<e.length;o++){var c=e[o];void 0===n[c]?n[c]=1:n[c]++}return t.reduce((function(t,e){var o=Object(a.a)(e,2),c=o[0],i=o[1];return[].concat(Object(j.a)(t),[[c,i-(n[c]||0)]])}),[])},x=n(0),p=function(t){var e=t.addToProgram,n=t.blocks,o=t.onResetProgram,c=t.onSubmitProgram,i=t.program,r=t.programSubmitted;return Object(x.jsx)("div",{id:"control-panel",children:Object(x.jsxs)("div",{id:"control-panel-container",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{id:"program",children:i.map((function(t,e){return Object(x.jsx)("div",{children:m[t].name},e)}))}),!r&&Object(x.jsxs)("div",{children:[Object(x.jsx)("button",{onClick:o,children:"Reset"}),Object(x.jsx)("button",{onClick:function(){window.scrollTo({top:0,behavior:"smooth"}),setTimeout(c,1e3)},children:"Submit Instructions"})]})]}),Object(x.jsx)("div",{id:"blocks",children:n.map((function(t,n){var o=Object(a.a)(t,2),c=o[0],i=o[1];if(0!=i)return Object(x.jsxs)("button",{className:"block",onClick:function(){return function(t){r||e(t)}(c)},children:[m[c].name," (x",i,")"]},n)}))})]})})},g=n(11),h=n.p+"static/media/rocket.0dec99f9.svg",v=n.p+"static/media/rover.b107911f.svg",y=800,S=600,I=100,T={ROVER:{image:v,height:80,width:80},ROCKET:{image:h,height:100,width:57}},k=[{name:"Mercury",introConfig:{size:15,scale:2,orbitDuration:1e4,textColor:"black"},colors:{main:"#ae7c43",sky:"#dbb78f",text:"black"},briefing:"The Tenacity rover has arrived on Mercury. Use the control panel to help Tenacity complete its missions.",missions:[{objective:"Navigate Tenacity back to the spacecraft for refueling.",blocks:[[O,2]],items:{rocket:{object:T.ROCKET,x:500},rover:{object:T.ROVER,x:300}},criteria:[{category:"rover_x",value:500}]},{objective:"This Mission has yet to be created. Check back soon!",blocks:[],items:{},criteria:[]}]},{name:"Venus"}];g.a.initialize("UA-123778931-5");var C,R=function(t,e){return"".concat(k[t].name,", Mission ").concat(e+1)},w=function(t){g.a.event(t)},E=(n(24),function(t){var e=t.onCompleteIntro,n=t.onStartPlaying,c=Object(o.useState)(!1),i=Object(a.a)(c,2),r=i[0],u=i[1],l=Object(s.b)({to:{opacity:r?0:1},from:{opacity:0},config:{duration:1500},onRest:function(){r&&e()}}),b=function(){w({category:"Game",action:"Play Game"}),n(),u(!0)};return Object(x.jsxs)(s.a.g,{opacity:l.opacity,children:[Object(x.jsx)("text",{x:"50%",y:"30%",dominantBaseline:"middle",textAnchor:"middle",className:"titleText",opacity:l.opacity,children:"Tenacity"}),Object(x.jsx)("text",{x:"50%",y:"45%",dominantBaseline:"middle",textAnchor:"middle",className:"subheadText",opacity:l.opacity,children:"A game by Brian Yu"}),Object(x.jsx)("rect",{x:300,y:"360",height:80,width:200,rx:20,fill:"white",className:"hoverable",onClick:b}),Object(x.jsx)("text",{x:400,y:"400",dominantBaseline:"middle",textAnchor:"middle",style:{fontSize:"48px",fill:"black"},className:"hoverable",onClick:b,children:"Play"})]})}),M=function(t){var e=t.planet;return Object(x.jsxs)("g",{children:[Object(x.jsx)("rect",{x:0,y:500,width:y,height:I,fill:e.colors.main}),Object(j.a)(Array(8).keys()).map((function(t){return Object(x.jsx)("rect",{x:100*t-.5,y:500,width:1,height:10},t)}))]})},N=function(t){var e=t.onCompleteIntro,n=t.onZoomIntro,c=t.planetIndex,i=k[c],r=i.introConfig.scale,u=Object(o.useState)(!1),l=Object(a.a)(u,2),b=l[0],j=l[1],d=Object(o.useState)(!1),O=Object(a.a)(d,2),m=O[0],f=O[1],p=Object(o.useState)(!1),g=Object(a.a)(p,2),h=g[0],v=g[1],y=Object(o.useState)(!1),S=Object(a.a)(y,2),I=S[0],T=S[1],C=Object(s.b)({to:{opacity:1},from:{opacity:0},config:{duration:1500},delay:1500}),R=Object(s.b)({to:{opacity:1},from:{opacity:0},config:{duration:1500},delay:3e3}),w=Object(s.b)({to:{angle:2*Math.PI},from:{angle:0},config:{duration:1e4},reset:b,onRest:function(){return j((function(t){return!t}))}}),E=Object(s.b)({to:{opacity:m?0:1},from:{opacity:1},config:{duration:2e3},onRest:function(){m&&e()}}),M=Object(s.b)({to:{opacity:I?1:0},from:{opacity:0},config:{duration:1e3},onRest:function(){I&&setTimeout((function(){f(!0)}),2e3)}}),N=k.slice(0,1+c).map((function(t,e){var o=e==c,i=void 0;o&&(i=Object(s.b)({to:{r:h?1600:t.introConfig.size*r},from:{r:t.introConfig.size*r},config:{duration:1e3},onRest:function(){h&&(n(),T(!0))}}));var a=100+20*e;return Object(x.jsxs)(s.a.g,{opacity:R.opacity,children:[Object(x.jsx)(s.a.circle,{cx:400,cy:300,r:a*r,fillOpacity:0,stroke:"white",strokeWidth:2}),Object(x.jsx)(s.a.circle,{cx:w.angle.interpolate((function(t){return 400+r*(a*Math.cos(t))})),cy:w.angle.interpolate((function(t){return 300-r*(a*Math.sin(t))})),r:o?i.r:t.introConfig.size*r,style:{fill:t.colors.main}})]},e)}));return Object(o.useEffect)((function(){var t=setTimeout((function(){v(!0)}),1e4);return function(){return clearTimeout(t)}}),[]),Object(x.jsxs)(s.a.g,{opacity:E.opacity,children:[Object(x.jsx)(s.a.circle,{cx:400,cy:300,r:50*r,style:{fill:"#f0f067"},opacity:C.opacity}),N,Object(x.jsx)(s.a.text,{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",style:{fontSize:"80px",fill:i.introConfig.textColor},opacity:M.opacity,children:i.name})]})},P=function(t){var e=t.planet,n=t.completedMissions;return Object(x.jsxs)("g",{children:[Object(x.jsx)("text",{textAnchor:"end",dominantBaseline:"hanging",x:785,y:15,style:{fill:e.colors.text,fontSize:"24px"},children:e.name}),e.missions.map((function(t,o){return Object(x.jsx)("circle",{cx:35+55*o,cy:35,r:20,style:{fill:n>o?e.colors.main:"rgba(0, 0, 0, 0)",stroke:e.colors.main,strokeWidth:n>o?0:1}},o)}))]})},A=Object(s.a)((function(t){var e=t.object,n=t.x,o=t.y,c=t.center;return Object(x.jsx)("image",{href:e.image,height:e.height,x:!1===c?n:n-e.width/2,y:o})})),L=function(t){var e=t.currentInstruction,n=t.planetIndex,c=t.missionIndex,i=t.onSuccess,r=t.onFailure,u=t.setCurrentInstruction,l=t.program,b=t.programSubmitted,j=k[n],m=j.missions[c];Object(o.useEffect)((function(){w({category:"Level",action:"Start Level",label:R(n,c)})}),[]);var f=Object(o.useState)(new Date),p=Object(a.a)(f,2),g=p[0],h=(p[1],Object(o.useState)(0)),v=Object(a.a)(h,2),y=v[0],S=v[1],I=Object(o.useState)(m.items),T=Object(a.a)(I,2),C=T[0],E=T[1],M=Object(o.useState)(!1),N=Object(a.a)(M,2),P=N[0],L=N[1],_=Object(o.useState)(!1),B=Object(a.a)(_,2),z=B[0],G=B[1];function D(t){switch(t.category){case"rover_x":return t.value===C.rover.x;default:return console.log("Error: Unknown criterion."),!1}}if(b&&e<l.length&&y==e)switch(l[e]){case O:S((function(t){return t+1})),E((function(t){var e=t.rover;return Object(d.a)(Object(d.a)({},t),{},{rover:Object(d.a)(Object(d.a)({},e),{},{x:e.x+100,prev:{x:e.x+100}})})}));break;default:console.log("ERROR: Unknown block.")}var F=Object(s.b)({to:{opacity:P?1:0},from:{opacity:0},config:{duration:1e3},delay:500,onRest:function(){P&&(w({category:"Level",action:"Win Level",label:R(n,c),value:Math.round((new Date-g)/1e3)}),setTimeout((function(){i()}),2500))}}),W=Object(s.b)({to:{opacity:z?1:0},from:{opacity:0},config:{duration:1e3},delay:500,onRest:function(){z&&(w({category:"Level",action:"Lose Level",label:R(n,c),value:Math.round((new Date-g)/1e3)}),setTimeout((function(){r()}),2500))}});return Object(x.jsxs)("g",{children:[Object.keys(C).map((function(t,n){var o=C[t],c=Object(s.b)({to:{x:o.x,elevation:o.elevation||0},from:{x:o.prev&&o.prev.x?o.prev.x:o.x,elevation:o.prev&&o.prev.elevation?o.prev.elevation:o.elevation||0},config:{duration:1e3},onRest:function(){"rover"===t&&b&&y===l.length&&(!function(){for(var t=0;t<m.criteria.length;t++)if(!D(m.criteria[t]))return!1;return!0}()?G(!0):L(!0)),"rover"===t&&b&&y>e&&y!=l.length&&setTimeout((function(){u(e+1)}),250)}});return Object(x.jsx)(A,{object:o.object,x:c.x,y:c.elevation.interpolate((function(t){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 500-t.height-e}(o.object,t)}))},n)})),Object(x.jsx)(s.a.text,{x:"50%",y:"20%",dominantBaseline:"middle",textAnchor:"middle",opacity:F.opacity,style:{fontSize:"80px",fill:j.colors.text},children:"Mission Success"}),Object(x.jsx)(s.a.text,{x:"50%",y:"20%",dominantBaseline:"middle",textAnchor:"middle",opacity:W.opacity,style:{fontSize:"80px",fill:j.colors.text},children:"Try Again"})]})},_=function(t){var e=t.missionNumber,n=t.objective;return Object(x.jsxs)("div",{style:{fontSize:"24px",textAlign:"center"},children:[Object(x.jsxs)("strong",{children:["Mission ",e," Objective"]}),Object(x.jsx)("br",{}),n]})},B=function(t){var e=t.briefing,n=t.onCompleteBriefing;return Object(x.jsxs)("div",{style:{fontSize:"24px",textAlign:"center"},children:[e,Object(x.jsx)("br",{}),Object(x.jsx)("button",{onClick:n,children:"Continue"})]})},z="COMPLETE_INTRO",G="COMPLETE_PLANET_INTRO",D="ZOOM_PLANET_INTRO",F="COMPLETE_BRIEFING",W="ADD_TO_PROGRAM",Z="RESET_PROGRAM",U="SUBMIT_PROGRAM",H="SET_INST_PTR",V="NEXT_MISSION",J="REPEAT_MISSION",K=(C={},Object(b.a)(C,z,(function(t){return Object(d.a)(Object(d.a)({},t),{},{introShown:!0})})),Object(b.a)(C,D,(function(t){return t.planetIntroStatus===Y.NOT_SHOWN?Object(d.a)(Object(d.a)({},t),{},{planetIntroStatus:Y.ZOOMING}):t})),Object(b.a)(C,G,(function(t){return Object(d.a)(Object(d.a)({},t),{},{planetIntroStatus:Y.COMPLETE})})),Object(b.a)(C,F,(function(t){return Object(d.a)(Object(d.a)({},t),{},{briefingShown:!0})})),Object(b.a)(C,W,(function(t,e){return Object(d.a)(Object(d.a)({},t),{},{program:[].concat(Object(j.a)(t.program),[e])})})),Object(b.a)(C,Z,(function(t){return Object(d.a)(Object(d.a)({},t),{},{program:[]})})),Object(b.a)(C,U,(function(t){return Object(d.a)(Object(d.a)({},t),{},{programSubmitted:!0})})),Object(b.a)(C,H,(function(t,e){return Object(d.a)(Object(d.a)({},t),{},{currentInstruction:e})})),Object(b.a)(C,V,(function(t){var e=k[t.planetIndex];return t.missionIndex+1<e.missions.length?Object(d.a)(Object(d.a)({},t),{},{missionIndex:t.missionIndex+1,round:t.round+1,program:[],programSubmitted:!1,currentInstruction:0}):t.planetIndex+1<k.length?Object(d.a)(Object(d.a)({},t),{},{planetIndex:t.planetIndex+1,missionIndex:0,round:t.round+1,planetIntroShown:!1,briefingShown:!1,program:[],programSubmitted:!1,currentInstruction:0}):Object(d.a)(Object(d.a)({},t),{},{done:!0})})),Object(b.a)(C,J,(function(t){return Object(d.a)(Object(d.a)({},t),{},{round:t.round+1,program:[],programSubmitted:!1,currentInstruction:0})})),C),Y={NOT_SHOWN:0,ZOOMING:1,COMPLETE:2},X=function(t,e){var n=e.type,o=e.payload,c=K[n];return c?c(t,o):t},q=function(t){var e,n=t.onStartPlaying,c=Object(o.useReducer)(X,{planetIndex:0,missionIndex:0,done:!1,round:0,introShown:!!(e=!1),planetIntroStatus:e?Y.COMPLETE:Y.NOT_SHOWN,briefingShown:!!e,program:[],programSubmitted:!1,currentInstruction:0}),i=Object(a.a)(c,2),r=i[0],u=i[1],l=function(t,e){return u({type:t,payload:e})},b=r.planetIndex,j=r.missionIndex,d=r.introShown,O=r.planetIntroStatus,m=r.briefingShown,g=r.program,h=r.programSubmitted,v=r.round,I=r.currentInstruction,T=r.done,C=k[b],R=C.missions[j];function w(){l(z)}function A(){l(D)}function K(){l(G)}function q(){l(F)}function Q(t){l(H,t)}var $=Object(s.b)({to:{color:d?O>=Y.ZOOMING?C.colors.sky:"black":"rgba(0, 0, 0, 0)"},from:{color:"rgba(0, 0, 0, 0)"},config:{duration:1500}}),tt=O==Y.COMPLETE,et=tt&&m;return T?Object(x.jsx)("div",{children:"game over"}):Object(x.jsxs)("div",{style:{maxWidth:y},children:[Object(x.jsxs)(s.a.svg,{width:y,height:S,className:"scene",style:{backgroundColor:$.color},children:[O>=Y.ZOOMING&&Object(x.jsx)(M,{planet:C}),tt&&Object(x.jsx)(P,{planet:C,completedMissions:j}),d?tt?Object(x.jsx)(L,{currentInstruction:I,planetIndex:b,missionIndex:j,onFailure:function(){return l(J)},onSuccess:function(){return l(V)},setCurrentInstruction:Q,program:g,programSubmitted:h},v):Object(x.jsx)(N,{planetIndex:b,onZoomIntro:A,onCompleteIntro:K}):Object(x.jsx)(E,{onStartPlaying:n,onCompleteIntro:w})]}),tt&&(m?Object(x.jsx)(_,{missionNumber:j+1,objective:R.objective}):Object(x.jsx)(B,{briefing:C.briefing,onCompleteBriefing:q})),et&&Object(x.jsx)(p,{addToProgram:function(t){l(W,t)},blocks:f(R.blocks,g),onResetProgram:function(){return l(Z)},onSubmitProgram:function(){return l(U)},program:g,programSubmitted:h})]})},Q=n.p+"static/media/amerika.421d9361.mp3",$=Object(s.a)(l.a),tt=function(){var t=Object(o.useState)(!1),e=Object(a.a)(t,2),n=e[0],c=e[1],i=Object(s.b)({to:{volume:n?100:0},from:{volume:0},config:{duration:8e3}});return Object(x.jsxs)("div",{className:"page",children:[Object(x.jsx)("div",{className:"scene-container",children:Object(x.jsx)(q,{onStartPlaying:function(){return c(!0)}})}),Object(x.jsx)($,{url:Q,playStatus:n?l.a.status.PLAYING:l.a.status.STOPPED,autoLoad:!0,loop:!0,volume:i.volume})]})},et=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,26)).then((function(e){var n=e.getCLS,o=e.getFID,c=e.getFCP,i=e.getLCP,r=e.getTTFB;n(t),o(t),c(t),i(t),r(t)}))};g.a.pageview(window.location.pathname+window.location.search),r.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(tt,{})}),document.getElementById("root")),et()}},[[25,1,2]]]);
//# sourceMappingURL=main.46e5a5ea.chunk.js.map